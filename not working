<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Gram Sahayak AI ğŸŒ¾ â€” Rural Assistant</title>
<style>
/* ============================================================
   ROOT VARIABLES & RESET
============================================================ */
*{margin:0;padding:0;box-sizing:border-box;}
:root{
  --green:#2e7d32; --lgreen:#4caf50; --dgreen:#1b5e20;
  --bg:#f1f8e9; --card:#fff; --text:#1b1b1b; --muted:#666;
  --ubub:#c8e6c9; --bbub:#fff; --border:#dcedc8;
  --shadow:0 4px 20px rgba(0,0,0,.10); --r:16px;
  --header:linear-gradient(135deg,#2e7d32,#4caf50);
  --inputbg:#fff; --statbg:#f9fbe7;
}
body.dark{
  --bg:#121212; --card:#1e1e1e; --text:#e0e0e0; --muted:#aaa;
  --ubub:#2e7d32; --bbub:#1e1e1e; --border:#333;
  --header:linear-gradient(135deg,#1b5e20,#2e7d32);
  --inputbg:#1e1e1e; --statbg:#161616;
}
html,body{height:100%;font-family:'Segoe UI',Tahoma,sans-serif;
  background:var(--bg);color:var(--text);display:flex;
  flex-direction:column;transition:background .3s,color .3s;}

/* ============================================================
   SCROLLBAR
============================================================ */
::-webkit-scrollbar{width:5px}
::-webkit-scrollbar-thumb{background:#a5d6a7;border-radius:5px}

/* ============================================================
   HEADER
============================================================ */
header{
  background:var(--header);padding:13px 18px;
  display:flex;align-items:center;justify-content:space-between;
  box-shadow:0 2px 12px rgba(0,0,0,.25);position:sticky;top:0;z-index:100;
}
.hdr-left{display:flex;align-items:center;gap:11px}
.logo{width:46px;height:46px;background:#fff;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:22px;box-shadow:var(--shadow);flex-shrink:0}
.hdr-title h1{font-size:1.15rem;color:#fff;font-weight:700}
.hdr-title p{font-size:.7rem;color:rgba(255,255,255,.85)}
.hdr-right{display:flex;align-items:center;gap:8px}
.status-badge{display:flex;align-items:center;gap:6px;
  background:rgba(255,255,255,.2);padding:5px 12px;border-radius:20px;
  font-size:.75rem;color:#fff;font-weight:600}
.sdot{width:8px;height:8px;border-radius:50%;background:#a5d6a7;
  animation:pulse 1.5s infinite}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.3)}}
.hdr-btn{background:rgba(255,255,255,.2);border:none;color:#fff;
  width:34px;height:34px;border-radius:50%;cursor:pointer;font-size:.95rem;
  display:flex;align-items:center;justify-content:center;transition:all .2s}
.hdr-btn:hover{background:rgba(255,255,255,.35)}

/* ============================================================
   OFFLINE / ALERT BANNERS
============================================================ */
.banner{padding:7px 16px;font-size:.78rem;font-weight:600;display:none}
#offlineBanner{background:#fff3e0;border-left:4px solid #ff9800;color:#e65100}
#updateBanner{background:#e3f2fd;border-left:4px solid #2196f3;color:#0d47a1}

/* ============================================================
   TOPIC TABS
============================================================ */
.topics{background:var(--card);padding:10px 14px;display:flex;
  gap:8px;overflow-x:auto;scrollbar-width:none;
  box-shadow:0 1px 4px rgba(0,0,0,.07)}
.topics::-webkit-scrollbar{display:none}
.tbtn{white-space:nowrap;padding:6px 14px;border:2px solid var(--lgreen);
  background:var(--card);border-radius:20px;cursor:pointer;font-size:.78rem;
  font-weight:600;color:var(--green);transition:all .2s}
.tbtn:hover,.tbtn.active{background:var(--lgreen);color:#fff;border-color:var(--lgreen)}

/* ============================================================
   STATS BAR
============================================================ */
.stats-bar{background:var(--statbg);border-bottom:1px solid var(--border);
  padding:6px 16px;display:flex;gap:18px;font-size:.72rem;color:var(--muted);
  flex-wrap:wrap}
.stat{display:flex;align-items:center;gap:4px}
.stat strong{color:var(--green)}

/* ============================================================
   CHAT AREA
============================================================ */
.chat-wrap{flex:1;overflow-y:auto;padding:16px 14px;
  display:flex;flex-direction:column;gap:12px;scroll-behavior:smooth}

/* ============================================================
   MESSAGE BUBBLES
============================================================ */
.msg{display:flex;align-items:flex-end;gap:9px;
  animation:fadeUp .3s ease;max-width:88%}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.msg.user{align-self:flex-end;flex-direction:row-reverse}
.msg.bot{align-self:flex-start}
.av{width:34px;height:34px;border-radius:50%;font-size:17px;
  display:flex;align-items:center;justify-content:center;flex-shrink:0}
.av.bot-av{background:var(--lgreen)}
.av.usr-av{background:#81c784}
.bubble{padding:11px 15px;border-radius:var(--r);font-size:.88rem;
  line-height:1.6;box-shadow:var(--shadow);max-width:100%;word-wrap:break-word}
.msg.user .bubble{background:var(--ubub);border-bottom-right-radius:4px;
  color:var(--text)}
.msg.bot .bubble{background:var(--bbub);border-bottom-left-radius:4px;
  border-left:4px solid var(--lgreen);color:var(--text)}
.ts{font-size:.65rem;color:var(--muted);margin-top:5px;text-align:right}
.read-aloud{background:none;border:none;cursor:pointer;font-size:.8rem;
  color:var(--lgreen);margin-top:4px;padding:2px 6px;border-radius:8px;
  border:1px solid var(--lgreen);transition:all .2s}
.read-aloud:hover{background:var(--lgreen);color:#fff}

/* ============================================================
   TYPING INDICATOR
============================================================ */
.typing-dots{display:flex;gap:5px;align-items:center;padding:8px 12px}
.typing-dots span{width:8px;height:8px;background:var(--lgreen);
  border-radius:50%;animation:bounce 1.2s infinite}
.typing-dots span:nth-child(2){animation-delay:.2s}
.typing-dots span:nth-child(3){animation-delay:.4s}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}

/* ============================================================
   CHIPS / SUGGESTIONS
============================================================ */
.chips{display:flex;flex-wrap:wrap;gap:7px;margin-top:9px}
.chip{background:#e8f5e9;border:1px solid var(--lgreen);color:var(--green);
  padding:4px 11px;border-radius:14px;font-size:.75rem;cursor:pointer;
  transition:all .2s;font-weight:500}
.chip:hover{background:var(--lgreen);color:#fff}
body.dark .chip{background:#1b3a1c;color:#a5d6a7}
body.dark .chip:hover{background:var(--lgreen);color:#fff}

/* ============================================================
   INPUT BAR
============================================================ */
.input-bar{background:var(--inputbg);padding:12px 14px;
  display:flex;gap:9px;align-items:center;
  box-shadow:0 -2px 10px rgba(0,0,0,.08);
  border-top:1px solid var(--border)}
#userInput{flex:1;border:2px solid var(--border);border-radius:22px;
  padding:9px 16px;font-size:.88rem;outline:none;
  transition:border-color .2s;font-family:inherit;resize:none;
  max-height:90px;background:var(--inputbg);color:var(--text)}
#userInput:focus{border-color:var(--lgreen)}
.ibtn{width:42px;height:42px;border-radius:50%;border:none;cursor:pointer;
  font-size:1rem;display:flex;align-items:center;justify-content:center;
  transition:all .2s;flex-shrink:0}
#micBtn{background:#e8f5e9;color:var(--green)}
#micBtn.listening{background:#ffcdd2;color:#c62828;animation:micP 1s infinite}
@keyframes micP{0%,100%{box-shadow:0 0 0 0 rgba(198,40,40,.3)}50%{box-shadow:0 0 0 10px rgba(198,40,40,0)}}
#sendBtn{background:var(--lgreen);color:#fff}
#sendBtn:hover{background:var(--dgreen)}
#micBtn:hover{background:#c8e6c9}
.lang-sel{padding:5px 9px;border:2px solid var(--border);border-radius:10px;
  font-size:.75rem;color:var(--green);background:var(--inputbg);
  cursor:pointer;outline:none;color:var(--text)}

/* ============================================================
   MODAL (Settings / Info)
============================================================ */
.modal-overlay{display:none;position:fixed;inset:0;
  background:rgba(0,0,0,.5);z-index:200;align-items:center;justify-content:center}
.modal-overlay.open{display:flex}
.modal{background:var(--card);border-radius:var(--r);padding:24px;
  width:min(420px,92vw);max-height:80vh;overflow-y:auto;
  box-shadow:0 8px 40px rgba(0,0,0,.25);position:relative}
.modal h2{color:var(--green);margin-bottom:14px;font-size:1.1rem}
.modal-close{position:absolute;top:14px;right:16px;background:none;
  border:none;font-size:1.3rem;cursor:pointer;color:var(--muted)}
.setting-row{display:flex;align-items:center;justify-content:space-between;
  padding:10px 0;border-bottom:1px solid var(--border)}
.setting-row:last-child{border:none}
.setting-label{font-size:.88rem;font-weight:600}
.setting-sub{font-size:.72rem;color:var(--muted);margin-top:2px}
.toggle{width:42px;height:24px;background:#ccc;border-radius:12px;
  cursor:pointer;position:relative;transition:background .2s;border:none}
.toggle.on{background:var(--lgreen)}
.toggle::after{content:'';position:absolute;width:18px;height:18px;
  background:#fff;border-radius:50%;top:3px;left:3px;transition:left .2s}
.toggle.on::after{left:21px}
.modal-btn{background:var(--lgreen);color:#fff;border:none;padding:8px 18px;
  border-radius:10px;cursor:pointer;font-size:.85rem;font-weight:600;
  transition:background .2s}
.modal-btn:hover{background:var(--dgreen)}
.modal-btn.danger{background:#e53935}
.modal-btn.danger:hover{background:#b71c1c}

/* ============================================================
   WEATHER WIDGET
============================================================ */
.weather-widget{background:linear-gradient(135deg,#1565c0,#42a5f5);
  border-radius:var(--r);padding:14px 18px;color:#fff;
  margin:10px 14px 0;box-shadow:var(--shadow);display:none}
.weather-widget.show{display:block}
.ww-top{display:flex;justify-content:space-between;align-items:center}
.ww-temp{font-size:2.2rem;font-weight:700}
.ww-info{text-align:right;font-size:.8rem;opacity:.9}
.ww-bot{display:flex;gap:18px;margin-top:10px;font-size:.78rem;opacity:.9}
.ww-row{display:flex;align-items:center;gap:5px}

/* ============================================================
   QUICK ACTION CARDS
============================================================ */
.qa-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;
  padding:12px 14px}
.qa-card{background:var(--card);border:2px solid var(--border);
  border-radius:12px;padding:12px;cursor:pointer;transition:all .2s;
  text-align:center}
.qa-card:hover{border-color:var(--lgreen);transform:translateY(-2px);
  box-shadow:var(--shadow)}
.qa-icon{font-size:1.6rem;margin-bottom:6px}
.qa-title{font-size:.78rem;font-weight:700;color:var(--text)}
.qa-sub{font-size:.68rem;color:var(--muted);margin-top:3px}

/* ============================================================
   EMERGENCY PANEL
============================================================ */
.emergency{background:#ffebee;border:2px solid #ef9a9a;border-radius:var(--r);
  padding:12px 16px;margin:0 14px 10px;display:none}
.emergency.show{display:block}
.emer-title{color:#c62828;font-weight:700;font-size:.9rem;margin-bottom:8px}
.emer-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
.emer-btn{background:#fff;border:1px solid #ef9a9a;border-radius:10px;
  padding:8px;cursor:pointer;text-align:center;font-size:.75rem;
  font-weight:600;color:#c62828;transition:all .2s}
.emer-btn:hover{background:#c62828;color:#fff}
body.dark .emergency{background:#2d1010;border-color:#7f1d1d}
body.dark .emer-btn{background:#3d1010;color:#ef9a9a}

/* ============================================================
   PROGRESS BAR
============================================================ */
#progress{height:3px;background:var(--lgreen);width:0%;
  transition:width .4s;position:fixed;top:0;left:0;z-index:999}

/* ============================================================
   RESPONSIVE
============================================================ */
@media(max-width:480px){
  .hdr-title h1{font-size:1rem}
  .bubble{font-size:.82rem}
  .qa-grid{grid-template-columns:1fr 1fr}
  .stats-bar{gap:10px}
}
</style>
</head>
<body>

<!-- Progress Bar -->
<div id="progress"></div>

<!-- ============================================================
   SETTINGS MODAL
============================================================ -->
<div class="modal-overlay" id="settingsModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('settingsModal')">âœ•</button>
    <h2>âš™ï¸ Settings</h2>

    <div class="setting-row">
      <div><div class="setting-label">ğŸŒ™ Dark Mode</div>
        <div class="setting-sub">Switch to dark theme</div></div>
      <button class="toggle" id="darkToggle" onclick="toggleDark()"></button>
    </div>

    <div class="setting-row">
      <div><div class="setting-label">ğŸ”Š Auto Read Aloud</div>
        <div class="setting-sub">Bot reads every reply automatically</div></div>
      <button class="toggle" id="ttsToggle" onclick="toggleTTS()"></button>
    </div>

    <div class="setting-row">
      <div><div class="setting-label">ğŸ“³ Sound Alerts</div>
        <div class="setting-sub">Play sound on new message</div></div>
      <button class="toggle on" id="soundToggle" onclick="toggleSound()"></button>
    </div>

    <div class="setting-row">
      <div><div class="setting-label">ğŸŒ Language</div>
        <div class="setting-sub">Voice input & output language</div></div>
      <select class="lang-sel" id="modalLang" onchange="changeLanguage()">
        <option value="en-IN">ğŸ‡®ğŸ‡³ English (India)</option>
        <option value="hi-IN">ğŸ‡®ğŸ‡³ Hindi</option>
        <option value="ta-IN">ğŸ‡®ğŸ‡³ Tamil</option>
        <option value="te-IN">ğŸ‡®ğŸ‡³ Telugu</option>
        <option value="kn-IN">ğŸ‡®ğŸ‡³ Kannada</option>
        <option value="mr-IN">ğŸ‡®ğŸ‡³ Marathi</option>
        <option value="bn-IN">ğŸ‡®ğŸ‡³ Bengali</option>
        <option value="sw-KE">ğŸ‡°ğŸ‡ª Swahili</option>
        <option value="en-US">ğŸ‡ºğŸ‡¸ English (US)</option>
      </select>
    </div>

    <div class="setting-row">
      <div><div class="setting-label">ğŸ—‘ï¸ Clear Chat History</div>
        <div class="setting-sub">Remove all messages from this session</div></div>
      <button class="modal-btn danger" onclick="clearChat()">Clear</button>
    </div>

    <div class="setting-row">
      <div><div class="setting-label">ğŸ’¾ Export Chat</div>
        <div class="setting-sub">Download conversation as .txt file</div></div>
      <button class="modal-btn" onclick="exportChat()">Export</button>
    </div>

    <div class="setting-row">
      <div><div class="setting-label">ğŸ”‹ Data Saver Mode</div>
        <div class="setting-sub">Shorter replies to save bandwidth</div></div>
      <button class="toggle" id="saverToggle" onclick="toggleSaver()"></button>
    </div>
  </div>
</div>

<!-- ============================================================
   INFO MODAL
============================================================ -->
<div class="modal-overlay" id="infoModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('infoModal')">âœ•</button>
    <h2>â„¹ï¸ About Gram Sahayak AI</h2>
    <p style="font-size:.85rem;line-height:1.7;color:var(--muted)">
      <strong style="color:var(--green)">Gram Sahayak AI</strong> is a low-bandwidth, 
      offline-first AI assistant designed for rural communities.<br><br>
      âœ… Works without internet (local knowledge base)<br>
      ğŸ™ï¸ Voice input & text-to-speech output<br>
      ğŸŒ Multilingual support (8 languages)<br>
      ğŸŒ± Agriculture, Health, Weather, Gov Schemes, Education<br>
      ğŸ“² Mobile-friendly & battery efficient<br>
      ğŸ’¾ No data stored on any server<br><br>
      <strong style="color:var(--green)">Emergency Helplines:</strong><br>
      ğŸš‘ Medical: <strong>108</strong><br>
      ğŸš’ Fire: <strong>101</strong><br>
      ğŸ‘® Police: <strong>100</strong><br>
      ğŸŒŠ Disaster: <strong>1078</strong> (NDRF)<br>
      ğŸ‘©â€âš•ï¸ Women Helpline: <strong>181</strong><br>
      â˜ï¸ Kisan Helpline: <strong>1800-180-1551</strong>
    </p>
  </div>
</div>

<!-- ============================================================
   HEADER
============================================================ -->
<header>
  <div class="hdr-left">
    <div class="logo">ğŸŒ¾</div>
    <div class="hdr-title">
      <h1>Gram Sahayak AI</h1>
      <p>Low-Bandwidth Rural Assistant</p>
    </div>
  </div>
  <div class="hdr-right">
    <div class="status-badge">
      <div class="sdot"></div>
      <span id="statusText">Online</span>
    </div>
    <button class="hdr-btn" onclick="toggleEmergency()" title="Emergency">ğŸ†˜</button>
    <button class="hdr-btn" onclick="toggleWeather()" title="Weather">ğŸŒ¤ï¸</button>
    <button class="hdr-btn" onclick="openModal('infoModal')" title="Info">â„¹ï¸</button>
    <button class="hdr-btn" onclick="openModal('settingsModal')" title="Settings">âš™ï¸</button>
  </div>
</header>

<!-- ============================================================
   BANNERS
============================================================ -->
<div class="banner" id="offlineBanner">âš ï¸ You're offline â€” Using local knowledge base only. All core features still work!</div>
<div class="banner" id="updateBanner">ğŸ”„ New knowledge updates available â€” <a href="#" style="color:inherit" onclick="simulateUpdate()">Tap to sync</a></div>

<!-- ============================================================
   WEATHER WIDGET
============================================================ -->
<div class="weather-widget" id="weatherWidget">
  <div class="ww-top">
    <div>
      <div style="font-size:.8rem;opacity:.85" id="ww-loc">ğŸ“ Loading location...</div>
      <div class="ww-temp" id="ww-temp">--Â°C</div>
      <div style="font-size:.85rem" id="ww-desc">Fetching weather...</div>
    </div>
    <div class="ww-info">
      <div style="font-size:2rem" id="ww-icon">ğŸŒ¤ï¸</div>
      <div id="ww-date"></div>
    </div>
  </div>
  <div class="ww-bot">
    <div class="ww-row">ğŸ’§ Humidity: <strong id="ww-hum">--%</strong></div>
    <div class="ww-row">ğŸ’¨ Wind: <strong id="ww-wind">-- km/h</strong></div>
    <div class="ww-row">ğŸŒ¡ï¸ Feels: <strong id="ww-feels">--Â°C</strong></div>
  </div>
</div>

<!-- ============================================================
   EMERGENCY PANEL
============================================================ -->
<div class="emergency" id="emergencyPanel">
  <div class="emer-title">ğŸ†˜ Emergency Helplines â€” Tap to Call</div>
  <div class="emer-grid">
    <button class="emer-btn" onclick="callNum('108')">ğŸš‘ Ambulance<br><strong>108</strong></button>
    <button class="emer-btn" onclick="callNum('100')">ğŸ‘® Police<br><strong>100</strong></button>
    <button class="emer-btn" onclick="callNum('101')">ğŸš’ Fire Brigade<br><strong>101</strong></button>
    <button class="emer-btn" onclick="callNum('1078')">ğŸŒŠ NDRF Disaster<br><strong>1078</strong></button>
    <button class="emer-btn" onclick="callNum('181')">ğŸ‘© Women Safety<br><strong>181</strong></button>
    <button class="emer-btn" onclick="callNum('1800-180-1551')">ğŸŒ¾ Kisan Helpline<br><strong>1800-180-1551</strong></button>
  </div>
</div>

<!-- ============================================================
   TOPIC TABS
============================================================ -->
<div class="topics">
  <button class="tbtn active" onclick="setTopic('all',this)">ğŸŒ All</button>
  <button class="tbtn" onclick="setTopic('agriculture',this)">ğŸŒ± Agriculture</button>
  <button class="tbtn" onclick="setTopic('health',this)">â¤ï¸ Health</button>
  <button class="tbtn" onclick="setTopic('weather',this)">ğŸŒ¦ï¸ Weather</button>
  <button class="tbtn" onclick="setTopic('government',this)">ğŸ›ï¸ Gov Schemes</button>
  <button class="tbtn" onclick="setTopic('education',this)">ğŸ“š Education</button>
  <button class="tbtn" onclick="setTopic('livestock',this)">ğŸ„ Livestock</button>
  <button class="tbtn" onclick="setTopic('finance',this)">ğŸ’° Finance</button>
  <button class="tbtn" onclick="setTopic('market',this)">ğŸ“Š Market</button>
</div>

<!-- ============================================================
   STATS BAR
============================================================ -->
<div class="stats-bar">
  <div class="stat">ğŸ’¬ <strong id="msgCount">0</strong> msgs</div>
  <div class="stat">ğŸ“¦ <strong id="kbUsed">0 B</strong> used</div>
  <div class="stat">ğŸ”‹ <strong id="modeText">Normal</strong></div>
  <div class="stat">â±ï¸ <strong id="sessionTime">0:00</strong></div>
  <div class="stat" id="weatherStat" style="display:none">ğŸŒ¡ï¸ <strong id="tempStat">--Â°C</strong></div>
</div>

<!-- ============================================================
   QUICK ACTION CARDS (shown before first message)
============================================================ -->
<div class="qa-grid" id="qaGrid">
  <div class="qa-card" onclick="sendMessage('Best crop for this season')">
    <div class="qa-icon">ğŸŒ±</div>
    <div class="qa-title">Crop Advice</div>
    <div class="qa-sub">Season & soil tips</div>
  </div>
  <div class="qa-card" onclick="sendMessage('How to treat fever at home')">
    <div class="qa-icon">â¤ï¸</div>
    <div class="qa-title">Health Help</div>
    <div class="qa-sub">Symptoms & first aid</div>
  </div>
  <div class="qa-card" onclick="sendMessage('PM KISAN scheme details')">
    <div class="qa-icon">ğŸ›ï¸</div>
    <div class="qa-title">Gov Schemes</div>
    <div class="qa-sub">Benefits & apply</div>
  </div>
  <div class="qa-card" onclick="sendMessage('Flood and monsoon advisory')">
    <div class="qa-icon">ğŸŒ¦ï¸</div>
    <div class="qa-title">Weather Tips</div>
    <div class="qa-sub">Seasonal advisory</div>
  </div>
  <div class="qa-card" onclick="sendMessage('How to take care of cows')">
    <div class="qa-icon">ğŸ„</div>
    <div class="qa-title">Livestock Care</div>
    <div class="qa-sub">Animal health</div>
  </div>
  <div class="qa-card" onclick="sendMessage('How to save money and get loan')">
    <div class="qa-icon">ğŸ’°</div>
    <div class="qa-title">Finance Tips</div>
    <div class="qa-sub">Savings & loans</div>
  </div>
</div>

<!-- ============================================================
   CHAT AREA
============================================================ -->
<div class="chat-wrap" id="chatBox"></div>

<!-- ============================================================
   INPUT BAR
============================================================ -->
<div class="input-bar">
  <select class="lang-sel" id="langSelect" onchange="changeLanguage()">
    <option value="en-IN">ğŸ‡®ğŸ‡³ EN</option>
    <option value="hi-IN">ğŸ‡®ğŸ‡³ HI</option>
    <option value="ta-IN">ğŸ‡®ğŸ‡³ TA</option>
    <option value="te-IN">ğŸ‡®ğŸ‡³ TE</option>
    <option value="kn-IN">ğŸ‡®ğŸ‡³ KN</option>
    <option value="mr-IN">ğŸ‡®ğŸ‡³ MR</option>
    <option value="bn-IN">ğŸ‡®ğŸ‡³ BN</option>
    <option value="sw-KE">ğŸ‡°ğŸ‡ª SW</option>
  </select>
  <textarea id="userInput" rows="1"
    placeholder="Ask about farming, health, weather..."
    oninput="autoResize(this)"
    onkeydown="handleKey(event)"></textarea>
  <button class="ibtn" id="micBtn" onclick="toggleMic()" title="Voice Input">ğŸ™ï¸</button>
  <button class="ibtn" id="sendBtn" onclick="sendMessage()" title="Send">â¤</button>
</div>

<!-- ============================================================
   AUDIO (notification sound)
============================================================ -->
<audio id="notifSound" src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAA..." preload="auto"></audio>

<!-- ============================================================
   JAVASCRIPT
============================================================ -->
<script>
/* ============================================================
   MASSIVE KNOWLEDGE BASE
============================================================ */
const KB = {

  agriculture:[
    {
      kw:["rice","paddy","dhaan","sowing rice","transplant"],
      a:`ğŸŒ¾ <b>Rice / Paddy Farming â€” Complete Guide</b><br><br>
<b>Varieties:</b> IR-64, Swarna, MTU-1010, BPT-5204 (Sona Masoori), PR-106, HUR-36<br>
<b>Sowing Season:</b> Kharif (Juneâ€“July) | Rabi (Novâ€“Dec in some regions)<br>
<b>Nursery:</b> Sow in nursery bed â†’ transplant 25â€“30 day old seedlings<br>
<b>Spacing:</b> 20Ã—15 cm for higher yield | Direct seeding also works<br>
<b>Water:</b> Keep 5 cm water up to panicle initiation; drain before harvest<br>
<b>Fertilizer (per acre):</b> Urea 50 kg + DAP 25 kg + MOP 17 kg<br>&nbsp;&nbsp;Split Urea: Basal(Â¼) + Tillering(Â¼) + Panicle(Â½)<br>
<b>Diseases:</b> Blast (spray Tricyclazole 6g/10L) | BLB (spray Copper Oxychloride)<br>
<b>Pests:</b> Stem Borer (Chlorpyrifos 2ml/L) | Brown Planthopper (Imidacloprid)<br>
<b>Yield:</b> 20â€“30 qt/acre (improved varieties up to 40 qt/acre)<br>
<b>Post-harvest:</b> Dry to 14% moisture before storage`
    },
    {
      kw:["wheat","gehu","rabi","winter crop","wheat farming"],
      a:`ğŸŒ¾ <b>Wheat Farming â€” Complete Guide</b><br><br>
<b>Varieties:</b> HD-2967, HD-3086, PBW-343, DBW-187, Raj-4120<br>
<b>Sowing Time:</b> Oct 25â€“Nov 25 (timely) | Dec (late sowing, use K-9107)<br>
<b>Seed Rate:</b> 40â€“45 kg/acre for timely sowing<br>
<b>Soil:</b> Well-drained loam or clay loam; pH 6.0â€“7.5<br>
<b>Fertilizer:</b> 50 kg Urea + 25 kg DAP + 17 kg MOP per acre<br>&nbsp;&nbsp;Apply Urea in 3 splits: at sowing, 21 days, 42 days<br>
<b>Irrigation:</b> 6 critical stages â€” CRI (21d), Tillering, Jointing, Flowering, Dough, Maturity<br>
<b>Diseases:</b> Yellow Rust (Propiconazole 1ml/L) | Loose Smut (seed treatment with Vitavax)<br>
<b>Harvest:</b> When grain moisture drops to 12â€“14%; use combine for large area<br>
<b>Yield:</b> 18â€“22 qt/acre (improved varieties up to 28 qt/acre)`
    },
    {
      kw:["maize","corn","makka","kharif maize"],
      a:`ğŸŒ½ <b>Maize / Corn Farming Guide</b><br><br>
<b>Varieties:</b> DHM-117, HQPM-1 (QPM), P3401, DKC-9141<br>
<b>Season:</b> Kharif (Juneâ€“July) | Rabi (Octâ€“Nov in South India)<br>
<b>Seed Rate:</b> 8 kg/acre | Spacing: 60Ã—20 cm<br>
<b>Soil:</b> Deep, well-drained loamy soil; pH 6.5â€“7.5<br>
<b>Fertilizer:</b> 60 kg Urea + 30 kg DAP + 20 kg MOP per acre<br>
<b>Irrigation:</b> Critical at knee-high, silking and grain fill stages<br>
<b>Pests:</b> Fall Armyworm â€” spray Emamectin Benzoate 0.5g/L (major threat!)<br>
<b>Disease:</b> Turcicum Blight â€” use resistant varieties<br>
<b>Yield:</b> 25â€“35 qt/acre; QPM varieties have high protein value<br>
<b>Use:</b> Food, animal feed, poultry, starch, ethanol`
    },
    {
      kw:["soil","fertilizer","nutrient","compost","soil health","ph","organic matter"],
      a:`ğŸŒ± <b>Soil Health & Fertilizer Guide</b><br><br>
<b>Soil Testing:</b> Test every 2â€“3 years at KVK or Soil Health Card centre<br>
<b>Ideal pH:</b> 6.0â€“7.5 for most crops<br>&nbsp;&nbsp;If pH < 6: Add lime (Calcium carbonate) 100â€“200 kg/acre<br>&nbsp;&nbsp;If pH > 8: Add Gypsum or Sulphur 20 kg/acre<br>
<b>NPK for General Crops:</b> Nitrogen:Phosphorus:Potassium = 4:2:1 ratio<br>
<b>Organic Inputs:</b><br>
&nbsp;&nbsp;â€¢ FYM (Farm Yard Manure): 2â€“4 tonnes/acre every season<br>
&nbsp;&nbsp;â€¢ Vermicompost: 400â€“600 kg/acre â€” best for vegetables<br>
&nbsp;&nbsp;â€¢ Green Manure (Dhaincha): Fixes 80â€“100 kg N/ha<br>
&nbsp;&nbsp;â€¢ Neem Cake: 100 kg/acre â€” controls soil pests too<br>
<b>Micronutrients:</b> Zinc (ZnSO4 10 kg/acre), Boron, Iron for deficiency symptoms<br>
<b>Signs of Deficiency:</b><br>
&nbsp;&nbsp;â€¢ N deficiency: Yellow lower leaves<br>
&nbsp;&nbsp;â€¢ P deficiency: Purple/reddish stems<br>
&nbsp;&nbsp;â€¢ K deficiency: Scorched leaf edges<br>
&nbsp;&nbsp;â€¢ Zn deficiency: Small leaves, white stripes`
    },
    {
      kw:["pest","insect","disease","spray","fungal","weed","pesticide"],
      a:`ğŸ› <b>Integrated Pest & Disease Management</b><br><br>
<b>Preventive Measures:</b><br>
&nbsp;&nbsp;â€¢ Crop rotation every season<br>
&nbsp;&nbsp;â€¢ Use certified disease-free seeds<br>
&nbsp;&nbsp;â€¢ Keep field bunds clean from weeds<br>
<b>Bio-pesticides (Safe & Cheap):</b><br>
&nbsp;&nbsp;â€¢ Neem oil 5ml + soap 2ml per litre â€” all sucking pests<br>
&nbsp;&nbsp;â€¢ Trichoderma viride 4g/kg seed â€” soil-borne fungal diseases<br>
&nbsp;&nbsp;â€¢ Beauveria bassiana â€” for thrips and whitefly<br>
&nbsp;&nbsp;â€¢ Pheromone traps â€” for stem borer, fruit borer monitoring<br>
<b>Chemical Sprays (Last Resort):</b><br>
&nbsp;&nbsp;â€¢ Sucking pests: Imidacloprid 0.3ml/L or Thiamethoxam<br>
&nbsp;&nbsp;â€¢ Chewing insects: Chlorpyrifos 2ml/L<br>
&nbsp;&nbsp;â€¢ Fungal disease: Mancozeb 2g/L or Carbendazim 1g/L<br>
&nbsp;&nbsp;â€¢ Bacterial: Copper Oxychloride 3g/L<br>
<b>Weed Control:</b> Pendimethalin (pre-emergence) or manual weeding at 20â€“25 DAS<br>
<b>Safety:</b> Always wear gloves, mask; spray in early morning or evening`
    },
    {
      kw:["irrigation","water","drip","sprinkler","flood irrigation","water saving"],
      a:`ğŸ’§ <b>Irrigation Methods & Water Management</b><br><br>
<b>Drip Irrigation:</b><br>
&nbsp;&nbsp;â€¢ Saves 40â€“50% water vs flood irrigation<br>
&nbsp;&nbsp;â€¢ Best for: sugarcane, cotton, vegetables, orchards<br>
&nbsp;&nbsp;â€¢ Govt subsidy: 50â€“90% under PMKSY scheme<br>
<b>Sprinkler Irrigation:</b><br>
&nbsp;&nbsp;â€¢ Saves 25â€“30% water<br>
&nbsp;&nbsp;â€¢ Best for: wheat, groundnut, soybean, pulses<br>
&nbsp;&nbsp;â€¢ Subsidy available under PMKSY<br>
<b>Flood Irrigation Tips:</b><br>
&nbsp;&nbsp;â€¢ Irrigate in the evening to reduce evaporation<br>
&nbsp;&nbsp;â€¢ Don't irrigate before expected rain (check forecast)<br>
&nbsp;&nbsp;â€¢ Level field properly for uniform water distribution<br>
<b>Water Conservation:</b><br>
&nbsp;&nbsp;â€¢ Mulching with straw reduces evaporation by 30%<br>
&nbsp;&nbsp;â€¢ Farm ponds to harvest rainwater<br>
&nbsp;&nbsp;â€¢ Check soil moisture before irrigating (finger test)<br>
<b>Apply for Drip Subsidy:</b> Visit nearest Agriculture Office or jalyukt-shivar.com`
    },
    {
      kw:["cotton","kapas","bt cotton","cotton farming"],
      a:`ğŸµï¸ <b>Cotton Farming Guide</b><br><br>
<b>Varieties:</b> Bt Hybrid Cotton â€” RCH-2, NCS-145, MRC-7017<br>
<b>Sowing Time:</b> Aprilâ€“June (Kharif) | Good pre-monsoon moisture needed<br>
<b>Spacing:</b> 90Ã—60 cm or 120Ã—45 cm<br>
<b>Fertilizer:</b> 80 kg Urea + 50 kg DAP + 35 kg MOP per acre<br>
<b>Key Pests:</b><br>
&nbsp;&nbsp;â€¢ Pink Bollworm â€” use pheromone traps + Emamectin spray<br>
&nbsp;&nbsp;â€¢ Whitefly â€” Triazophos 2ml/L; avoid excess irrigation<br>
&nbsp;&nbsp;â€¢ Mealybug â€” Profenofos 2ml/L<br>
<b>Disease:</b> Root rot (avoid waterlogging) | Leaf curl (control whitefly)<br>
<b>Water:</b> Sensitive to waterlogging â€” don't irrigate in excess<br>
<b>Picking:</b> 3â€“5 rounds of picking; first boll opens ~150 days<br>
<b>Yield:</b> 10â€“18 qt seed cotton/acre`
    },
    {
      kw:["vegetable","tomato","onion","potato","capsicum","brinjal","vegetable farming"],
      a:`ğŸ¥¦ <b>Vegetable Farming â€” Key Tips</b><br><br>
<b>Tomato:</b><br>
&nbsp;&nbsp;â€¢ Season: Sepâ€“Oct (Rabi) / Janâ€“Feb (Summer)<br>
&nbsp;&nbsp;â€¢ Spacing: 75Ã—45 cm | Transplant 25â€“30 day old seedlings<br>
&nbsp;&nbsp;â€¢ Staking required for tall varieties<br>
&nbsp;&nbsp;â€¢ Common disease: Early Blight â€” spray Mancozeb 2g/L<br>
<b>Onion:</b><br>
&nbsp;&nbsp;â€¢ Rabi onion: Octâ€“Nov nursery | Transplant Dec<br>
&nbsp;&nbsp;â€¢ Kharif onion: June nursery | Transplant Aug<br>
&nbsp;&nbsp;â€¢ Apply Urea at 30 and 60 DAS<br>
&nbsp;&nbsp;â€¢ Harvest when tops fall naturally<br>
<b>Potato:</b><br>
&nbsp;&nbsp;â€¢ Season: Octâ€“Nov (North India) | Janâ€“Feb (hills)<br>
&nbsp;&nbsp;â€¢ Spacing: 60Ã—15 cm; 10â€“12 cm deep planting<br>
&nbsp;&nbsp;â€¢ Late Blight is major disease â€” spray Metalaxyl at first sign<br>
<b>General Tips:</b><br>
&nbsp;&nbsp;â€¢ Use drip + mulch for vegetables<br>
&nbsp;&nbsp;â€¢ Apply micronutrients for quality produce<br>
&nbsp;&nbsp;â€¢ Harvest in cool morning hours for better shelf life`
    },
    {
      kw:["organic farming","jaivik","natural farming","zero budget","ZBNF"],
      a:`ğŸŒ¿ <b>Organic / Natural Farming Guide</b><br><br>
<b>Zero Budget Natural Farming (ZBNF):</b><br>
&nbsp;&nbsp;â€¢ Jeevamrit: 10 kg cow dung + 10L cow urine + 2 kg jaggery + 2 kg flour + 50L water<br>&nbsp;&nbsp;Apply 200L/acre every 15 days<br>
&nbsp;&nbsp;â€¢ Bijamrit: Seed treatment with cow dung + lime + water<br>
&nbsp;&nbsp;â€¢ Mulching with crop residue or dry leaves<br>
<b>Organic Certification:</b><br>
&nbsp;&nbsp;â€¢ PGS-India (Participatory Guarantee System) â€” free, village level<br>
&nbsp;&nbsp;â€¢ Third-party certification for export markets<br>
<b>Compost Making:</b><br>
&nbsp;&nbsp;â€¢ Layer crop residue + cow dung + soil in 3 ft deep pit<br>
&nbsp;&nbsp;â€¢ Ready in 60â€“90 days; turn every 15 days<br>
<b>Benefits:</b> Reduced input cost, healthy soil, premium price for organic produce<br>
<b>Market:</b> Sell at organic mandis or through FPOs for 20â€“30% premium`
    },
    {
      kw:["mango","orchard","fruit","banana","papaya","guava","fruit farming"],
      a:`ğŸ¥­ <b>Fruit Farming Guide</b><br><br>
<b>Mango:</b><br>
&nbsp;&nbsp;â€¢ Varieties: Alphonso, Dasheri, Langra, Kesar, Amrapali<br>
&nbsp;&nbsp;â€¢ Plant in Julyâ€“Aug (monsoon) | Spacing: 10Ã—10 m<br>
&nbsp;&nbsp;â€¢ Flowering in Decâ€“Feb; harvest Mayâ€“July<br>
&nbsp;&nbsp;â€¢ Apply 100g NPK/year/tree (increases with age)<br>
&nbsp;&nbsp;â€¢ Common problem: Powdery mildew on flowers â€” spray Karathane<br>
<b>Banana:</b><br>
&nbsp;&nbsp;â€¢ Tissue culture plants give best yield (30â€“40 kg/plant)<br>
&nbsp;&nbsp;â€¢ Spacing: 1.8Ã—1.8 m | Drip irrigation mandatory<br>
&nbsp;&nbsp;â€¢ Harvest in 10â€“12 months; use suckers for ratoon crop<br>
<b>Papaya:</b><br>
&nbsp;&nbsp;â€¢ Fast income â€” fruits in 8â€“10 months<br>
&nbsp;&nbsp;â€¢ Spacing: 2Ã—2 m | Mixed cropping possible<br>
&nbsp;&nbsp;â€¢ Papaya Ring Spot Virus â€” major problem; use virus-free plants<br>
<b>Market:</b> Link with FPO or APMC for better prices`
    }
  ],

  health:[
    {
      kw:["fever","temperature","high fever","malaria","dengue","flu"],
      a:`ğŸŒ¡ï¸ <b>Fever â€” Diagnosis & Treatment</b><br><br>
<b>Common Causes:</b> Malaria, Dengue, Typhoid, Viral flu, UTI<br>
<b>Immediate Steps:</b><br>
&nbsp;&nbsp;â€¢ Drink ORS / coconut water / plain water every hour<br>
&nbsp;&nbsp;â€¢ Sponge forehead with lukewarm water cloth<br>
&nbsp;&nbsp;â€¢ Take Paracetamol 500mg (adults) every 6 hours if >100Â°F<br>
&nbsp;&nbsp;â€¢ Rest completely; avoid heavy work<br>
<b>âš ï¸ Go to Doctor IMMEDIATELY if:</b><br>
&nbsp;&nbsp;â€¢ Fever > 103Â°F (39.5Â°C)<br>
&nbsp;&nbsp;â€¢ Lasts more than 3 days<br>
&nbsp;&nbsp;â€¢ With rash, severe headache, vomiting, fits<br>
&nbsp;&nbsp;â€¢ Child below 5 years has any fever<br>
<b>Malaria Signs:</b> Shivering, sweating cycles, chills every 2â€“3 days â†’ Get blood test<br>
<b>Dengue Signs:</b> Severe body/eye pain, rash on body, platelet drop â†’ Urgent hospital care<br>
<b>Typhoid:</b> Continuous fever + stomach pain â†’ Blood/Widal test needed<br>
<b>Helpline:</b> 104 (Health Helpline, free)`
    },
    {
      kw:["diarrhea","loose motion","stomach","vomit","cholera","dehydration"],
      a:`ğŸ’Š <b>Diarrhea & Dehydration â€” Complete Guide</b><br><br>
<b>Most Important â€” ORS:</b><br>
&nbsp;&nbsp;â€¢ Commercial ORS packet (Electral/Jeevan Jal) in 1 litre clean water<br>
&nbsp;&nbsp;â€¢ Home ORS: 1L water + 6 tsp sugar + Â½ tsp salt â€” stir well<br>
&nbsp;&nbsp;â€¢ Give 200ml after every loose stool<br>
<b>What to Eat:</b> Plain rice, khichdi, banana, curd rice, toast<br>
<b>Avoid:</b> Oily food, spicy food, milk, raw vegetables, street food<br>
<b>Children Under 5:</b><br>
&nbsp;&nbsp;â€¢ Continue breastfeeding during diarrhea<br>
&nbsp;&nbsp;â€¢ Zinc tablets (20mg/day for 14 days) reduces severity<br>
&nbsp;&nbsp;â€¢ If child becomes very weak, sunken eyes â†’ Emergency<br>
<b>Signs of Severe Dehydration:</b><br>
&nbsp;&nbsp;â€¢ No urine for 6+ hours | Sunken eyes | Dry mouth | Weakness<br>
&nbsp;&nbsp;â†’ Rush to hospital for IV fluid immediately<br>
<b>Prevention:</b><br>
&nbsp;&nbsp;â€¢ Wash hands with soap before eating and after toilet<br>
&nbsp;&nbsp;â€¢ Boil drinking water or use Aquatabs (chlorine tablets)<br>
&nbsp;&nbsp;â€¢ Do not eat stale or uncovered food`
    },
    {
      kw:["pregnancy","pregnant","delivery","maternal","antenatal","baby birth","garbh"],
      a:`ğŸ¤± <b>Pregnancy & Maternal Health â€” Full Guide</b><br><br>
<b>Register Early:</b> Visit PHC/Sub-Centre within 12 weeks of pregnancy<br>
<b>4 ANC Checkups Schedule:</b><br>
&nbsp;&nbsp;â€¢ 1st: Before 12 weeks (confirm pregnancy, blood test)<br>
&nbsp;&nbsp;â€¢ 2nd: 14â€“26 weeks (ultrasound, BP check)<br>
&nbsp;&nbsp;â€¢ 3rd: 28â€“34 weeks (position of baby)<br>
&nbsp;&nbsp;â€¢ 4th: 36 weeks onwards (delivery planning)<br>
<b>Daily Supplements (Free at PHC):</b><br>
&nbsp;&nbsp;â€¢ Iron & Folic Acid (IFA) tablets â€” start from 12 weeks<br>
&nbsp;&nbsp;â€¢ Calcium tablets â€” from 2nd trimester<br>
&nbsp;&nbsp;â€¢ Vitamin D as advised<br>
<b>Vaccinations:</b> TT-1 at any time; TT-2 after 4 weeks of TT-1<br>
<b>Danger Signs â†’ Rush to Hospital:</b><br>
&nbsp;&nbsp;â€¢ Heavy bleeding | Fits/seizures | Severe headache<br>
&nbsp;&nbsp;â€¢ Baby not moving for 12 hours | High BP<br>
<b>Government Benefits:</b><br>
&nbsp;&nbsp;â€¢ Janani Suraksha Yojana (JSY): â‚¹1400 cash for institutional delivery<br>
&nbsp;&nbsp;â€¢ PMSMA: Free checkup on 9th of every month at govt hospitals<br>
&nbsp;&nbsp;â€¢ Free ambulance: Call 108<br>
<b>After Birth:</b> Breastfeed within 1 hour | Give colostrum (first yellow milk) | Exclusive breastfeed 6 months`
    },
    {
      kw:["snakebite","snake bite","snake","viper","cobra","krait"],
      a:`ğŸ <b>Snakebite â€” EMERGENCY First Aid</b><br><br>
<b>WHAT TO DO:</b><br>
&nbsp;&nbsp;âœ… Keep the person CALM â€” panic increases venom spread<br>
&nbsp;&nbsp;âœ… Immobilize the bitten limb with a splint/stick<br>
&nbsp;&nbsp;âœ… Keep bitten limb BELOW heart level<br>
&nbsp;&nbsp;âœ… Remove rings, watches, tight clothing near bite<br>
&nbsp;&nbsp;âœ… Mark the time of bite with pen on skin<br>
&nbsp;&nbsp;âœ… Rush to NEAREST HOSPITAL IMMEDIATELY<br>
&nbsp;&nbsp;âœ… Call 108 ambulance<br><br>
<b>â›” WHAT NOT TO DO (causes more harm):</b><br>
&nbsp;&nbsp;âŒ Do NOT cut the wound or suck the venom<br>
&nbsp;&nbsp;âŒ Do NOT tie a tourniquet or tight bandage<br>
&nbsp;&nbsp;âŒ Do NOT apply herbs, mud, or fire on wound<br>
&nbsp;&nbsp;âŒ Do NOT give food, water, or alcohol<br>
&nbsp;&nbsp;âŒ Do NOT apply ice on wound<br><br>
<b>Anti-Snake Venom (ASV):</b><br>
&nbsp;&nbsp;â€¢ Available FREE at all government hospitals<br>
&nbsp;&nbsp;â€¢ Must be given within 4â€“6 hours for best effect<br>
<b>Remember:</b> 70% of Indian snakebites are from non-venomous snakes. Still go to hospital!`
    },
    {
      kw:["first aid","wound","cut","bleeding","burn","fracture","accident","injury"],
      a:`ğŸ©¹ <b>First Aid Guide â€” Common Emergencies</b><br><br>
<b>Deep Cuts & Bleeding:</b><br>
&nbsp;&nbsp;â€¢ Apply firm pressure with clean cloth for 10 minutes<br>
&nbsp;&nbsp;â€¢ Raise injured part above heart level<br>
&nbsp;&nbsp;â€¢ Clean wound with clean water (not spirit initially)<br>
&nbsp;&nbsp;â€¢ Apply antiseptic cream; bandage properly<br>
&nbsp;&nbsp;â€¢ If deep/gaping wound â€” needs stitching at hospital<br>
<b>Burns:</b><br>
&nbsp;&nbsp;â€¢ Run COOL (not ice cold) water for 10â€“20 minutes<br>
&nbsp;&nbsp;â€¢ Remove jewellery/clothes from burn area (if not stuck)<br>
&nbsp;&nbsp;â€¢ Cover with clean cloth; do NOT apply oil, toothpaste, or butter<br>
&nbsp;&nbsp;â€¢ Burns > size of palm or on face/hands â†’ Hospital immediately<br>
<b>Fractures / Broken Bone:</b><br>
&nbsp;&nbsp;â€¢ Do NOT try to straighten the bone<br>
&nbsp;&nbsp;â€¢ Immobilize with stick/splint on both sides<br>
&nbsp;&nbsp;â€¢ Support with cloth/bandage; handle gently<br>
<b>Unconscious Person:</b><br>
&nbsp;&nbsp;â€¢ Check breathing (watch chest rise)<br>
&nbsp;&nbsp;â€¢ Place in recovery position (on side)<br>
&nbsp;&nbsp;â€¢ If not breathing â€” start CPR<br>
<b>CPR (Basic):</b> 30 chest compressions (hard & fast) + 2 rescue breaths; repeat<br>
<b>Choking:</b> 5 back blows + 5 abdominal thrusts (Heimlich maneuver)`
    },
    {
      kw:["malnutrition","child nutrition","underweight","stunting","saam","anemia"],
      a:`ğŸ‘¶ <b>Child Nutrition & Malnutrition</b><br><br>
<b>Signs of Malnutrition:</b><br>
&nbsp;&nbsp;â€¢ Very thin arms (MUAC < 11.5 cm in children)<br>
&nbsp;&nbsp;â€¢ Swollen legs/feet<br>
&nbsp;&nbsp;â€¢ Hair falling or turning orange<br>
&nbsp;&nbsp;â€¢ Not growing in height or weight<br>
<b>What to Feed (6â€“24 months):</b><br>
&nbsp;&nbsp;â€¢ Thick khichdi with dal, vegetables, ghee<br>
&nbsp;&nbsp;â€¢ Mashed banana, boiled egg, mashed potato<br>
&nbsp;&nbsp;â€¢ Give 5â€“6 times/day in small amounts<br>
<b>Government Programs (FREE):</b><br>
&nbsp;&nbsp;â€¢ ICDS/Anganwadi: Supplementary nutrition, growth monitoring<br>
&nbsp;&nbsp;â€¢ NRC (Nutrition Rehabilitation Centre): For severe malnutrition<br>
&nbsp;&nbsp;â€¢ POSHAN Abhiyan: Monthly growth monitoring at Anganwadi<br>
<b>Anemia Prevention:</b><br>
&nbsp;&nbsp;â€¢ Iron-rich foods: Jaggery, green leafy vegetables, dates, meat<br>
&nbsp;&nbsp;â€¢ Weekly IFA (Iron Folic Acid) syrup for children 6 monthsâ€“5 years (free at AWC)<br>
<b>Contact:</b> Your nearest Anganwadi worker or ASHA for free support`
    },
    {
      kw:["diabetes","sugar","blood sugar","insulin","madhumeh"],
      a:`ğŸ©º <b>Diabetes (Sugar Disease) â€” Management</b><br><br>
<b>Symptoms to Watch:</b><br>
&nbsp;&nbsp;â€¢ Frequent urination, excessive thirst<br>
&nbsp;&nbsp;â€¢ Blurred vision, slow healing wounds<br>
&nbsp;&nbsp;â€¢ Unexplained weight loss or tiredness<br>
<b>Diet Rules for Diabetics:</b><br>
&nbsp;&nbsp;â€¢ âœ… Eat: Whole grains (millet, brown rice), green vegetables, dal, curd<br>
&nbsp;&nbsp;â€¢ âŒ Avoid: White rice/bread in excess, sweets, fruit juices, fried food<br>
&nbsp;&nbsp;â€¢ Eat small meals every 3â€“4 hours; never skip breakfast<br>
<b>Exercise:</b> 30-min walk daily reduces blood sugar significantly<br>
<b>Foot Care:</b> Check feet daily; small wounds must be treated immediately<br>
<b>Medicines:</b> Never stop medication without doctor advice<br>
<b>Government Support:</b><br>
&nbsp;&nbsp;â€¢ Free medicines at Jan Aushadhi Kendras (80% cheaper)<br>
&nbsp;&nbsp;â€¢ Free blood sugar testing at PHC/CHC<br>
<b>Target BP:</b> < 130/80 mmHg | Target Sugar: Fasting < 130 mg/dL`
    },
    {
      kw:["mental health","depression","stress","anxiety","suicide","tension","mansik"],
      a:`ğŸ§  <b>Mental Health â€” You Are Not Alone</b><br><br>
<b>Common Signs of Depression/Anxiety:</b><br>
&nbsp;&nbsp;â€¢ Feeling sad or empty for weeks<br>
&nbsp;&nbsp;â€¢ Loss of interest in daily activities<br>
&nbsp;&nbsp;â€¢ Sleeping too much or too little<br>
&nbsp;&nbsp;â€¢ Feeling worthless or hopeless<br>
&nbsp;&nbsp;â€¢ Difficulty concentrating<br>
<b>What Helps:</b><br>
&nbsp;&nbsp;â€¢ Talk to a trusted family member or friend<br>
&nbsp;&nbsp;â€¢ Regular physical activity and sunlight<br>
&nbsp;&nbsp;â€¢ Maintain daily routine â€” wake, eat, sleep at regular times<br>
&nbsp;&nbsp;â€¢ Reduce alcohol use completely<br>
<b>If someone talks about harming themselves:</b><br>
&nbsp;&nbsp;â€¢ Stay with them; listen without judgment<br>
&nbsp;&nbsp;â€¢ Remove access to dangerous items<br>
&nbsp;&nbsp;â€¢ Call iCall: <b>9152987821</b> (Monâ€“Sat, 8amâ€“10pm)<br>
&nbsp;&nbsp;â€¢ NIMHANS Helpline: <b>080-46110007</b><br>
&nbsp;&nbsp;â€¢ Vandrevala Foundation: <b>1860-2662-345</b> (24/7 free)<br>
<b>Remember:</b> Mental illness is a health condition, not a personal weakness. Seek help early.`
    }
  ],

  weather:[
    {
      kw:["rain","monsoon","rainfall","flood","water logging"],
      a:`ğŸŒ§ï¸ <b>Monsoon & Flood Preparedness</b><br><br>
<b>Before Monsoon:</b><br>
&nbsp;&nbsp;â€¢ Clean drainage channels around your field and home<br>
&nbsp;&nbsp;â€¢ Store 15 days food, clean water (10L/person), medicines<br>
&nbsp;&nbsp;â€¢ Repair roof, walls, and cattle shed<br>
&nbsp;&nbsp;â€¢ Note nearest high ground / relief camp location<br>
<b>During Heavy Rain / Flood:</b><br>
&nbsp;&nbsp;â€¢ Move to higher ground immediately if water enters home<br>
&nbsp;&nbsp;â€¢ Do NOT cross flooded roads, rivers, or streams<br>
&nbsp;&nbsp;â€¢ Keep children and elderly away from water<br>
&nbsp;&nbsp;â€¢ Turn off gas cylinders and electrical mains<br>
&nbsp;&nbsp;â€¢ Drink only boiled/filtered/bottled water<br>
<b>After Flood:</b><br>
&nbsp;&nbsp;â€¢ Do not eat food that has been in floodwater<br>
&nbsp;&nbsp;â€¢ Bleach home surfaces to prevent disease<br>
&nbsp;&nbsp;â€¢ Watch for snakes that may enter homes after flooding<br>
<b>For Farmers:</b><br>
&nbsp;&nbsp;â€¢ File crop loss claim within 72 hours of damage<br>
&nbsp;&nbsp;â€¢ PMFBY insurance claim: Contact insurance company or banker<br>
<b>Emergency: NDRF Helpline 1078 | Ambulance 108`
    },
    {
      kw:["drought","dry","water shortage","heat wave","garmi","heatstroke"],
      a:`â˜€ï¸ <b>Drought & Heat Wave Survival Guide</b><br><br>
<b>Personal Safety in Heat Wave:</b><br>
&nbsp;&nbsp;â€¢ Drink 3â€“4 litres of water/day; add ORS if sweating heavily<br>
&nbsp;&nbsp;â€¢ Avoid going out between 12 PM â€“ 4 PM<br>
&nbsp;&nbsp;â€¢ Wear light-coloured, loose cotton clothes<br>
&nbsp;&nbsp;â€¢ Eat light meals; avoid heavy, oily food<br>
<b>Heatstroke Signs (Emergency!):</b><br>
&nbsp;&nbsp;â€¢ Body temp > 40Â°C, confusion, not sweating, unconscious<br>
&nbsp;&nbsp;â€¢ ACTION: Move to shade, cool with wet cloth, rush to hospital<br>
<b>For Animals:</b><br>
&nbsp;&nbsp;â€¢ Provide shade and water continuously<br>
&nbsp;&nbsp;â€¢ Reduce work hours for bullocks<br>
<b>Drought-Resistant Crops:</b><br>
&nbsp;&nbsp;â€¢ Bajra, Jowar, Moth Bean, Cowpea, Cluster Bean<br>
&nbsp;&nbsp;â€¢ Castor, Sesame, Groundnut (short-duration varieties)<br>
<b>Water Conservation:</b><br>
&nbsp;&nbsp;â€¢ Mulching reduces soil moisture loss by 30â€“40%<br>
&nbsp;&nbsp;â€¢ Farm ponds for rainwater storage<br>
&nbsp;&nbsp;â€¢ Switch to drip irrigation (50% water saving)<br>
<b>Govt Relief:</b> Report crop loss to Patwari/Tehsildar for drought relief compensation`
    },
    {
      kw:["weather","forecast","temperature","season","climate","barish kab"],
      a:`ğŸŒ¤ï¸ <b>Weather Advisory for Farmers</b><br><br>
<b>Free Weather Apps/Services:</b><br>
&nbsp;&nbsp;â€¢ <b>Meghdoot App</b> â€” village-level 5-day forecast for farmers (offline capable)<br>
&nbsp;&nbsp;â€¢ <b>Kisan Suvidha App</b> â€” weather + crop advisory + market prices<br>
&nbsp;&nbsp;â€¢ <b>Damini App</b> â€” lightning alerts (very useful!)<br>
&nbsp;&nbsp;â€¢ SMS service: Send your pin code to 7738299899 (IMD)<br>
<b>Seasonal Calendar:</b><br>
&nbsp;&nbsp;â€¢ Kharif sowing: June 15â€“July 15 (after 1st good monsoon rain)<br>
&nbsp;&nbsp;â€¢ Rabi sowing: Oct 15â€“Nov 30<br>
&nbsp;&nbsp;â€¢ Zaid season: Febâ€“May (short-duration crops)<br>
<b>Farming Weather Rules:</b><br>
&nbsp;&nbsp;â€¢ Don't spray pesticides if rain expected in 24 hours<br>
&nbsp;&nbsp;â€¢ Plant on cloudy days to reduce transplant shock<br>
&nbsp;&nbsp;â€¢ Harvest before predicted rain to avoid crop damage<br>
&nbsp;&nbsp;â€¢ Wind > 40 km/h â€” support standing crops with stakes<br>
<b>IMD Helpline:</b> 1800-180-1717 (free weather inquiry)`
    },
    {
      kw:["lightning","thunder","bijali","storm","cyclone","hailstorm","ola"],
      a:`âš¡ <b>Lightning & Storm Safety</b><br><br>
<b>During Lightning / Thunderstorm:</b><br>
&nbsp;&nbsp;â€¢ Go indoors or into a hard-top vehicle immediately<br>
&nbsp;&nbsp;â€¢ Stay away from tall trees, poles, metal fences<br>
&nbsp;&nbsp;â€¢ Do NOT stand in open fields or on rooftops<br>
&nbsp;&nbsp;â€¢ Unplug electrical appliances<br>
&nbsp;&nbsp;â€¢ Do NOT use mobile phone outdoors during storm<br>
<b>If caught in open field:</b><br>
&nbsp;&nbsp;â€¢ Squat low on balls of feet â€” minimise contact with ground<br>
&nbsp;&nbsp;â€¢ Do NOT lie flat on ground<br>
&nbsp;&nbsp;â€¢ Stay at least 100 metres from tall trees<br>
<b>If Someone is Struck by Lightning:</b><br>
&nbsp;&nbsp;â€¢ It is SAFE to touch them â€” they are not electrically charged<br>
&nbsp;&nbsp;â€¢ Start CPR immediately if unconscious<br>
&nbsp;&nbsp;â€¢ Call 108 ambulance<br>
<b>For Cyclone:</b><br>
&nbsp;&nbsp;â€¢ Listen to IMD alerts; evacuate if ordered<br>
&nbsp;&nbsp;â€¢ Store water, food, torch, medicines<br>
&nbsp;&nbsp;â€¢ Stay in strongest part of building`
    }
  ],

  government:[
    {
      kw:["pm kisan","pmkisan","kisan samman","6000","farmer payment","installment"],
      a:`ğŸ›ï¸ <b>PM-KISAN Samman Nidhi â€” Complete Guide</b><br><br>
<b>Benefit:</b> â‚¹6,000/year in 3 installments of â‚¹2,000 each<br>
<b>Who can apply:</b> All small & marginal farmers with cultivable land<br>
<b>Not Eligible:</b> Government employees, taxpayers, professionals (doctors, lawyers)<br>
<b>Documents Needed:</b><br>
&nbsp;&nbsp;â€¢ Aadhaar card (mandatory)<br>
&nbsp;&nbsp;â€¢ Bank account linked to Aadhaar<br>
&nbsp;&nbsp;â€¢ Land records (Khasra/Khatauni)<br>
&nbsp;&nbsp;â€¢ Mobile number<br>
<b>How to Apply:</b><br>
&nbsp;&nbsp;1. Visit pmkisan.gov.in â†’ New Farmer Registration<br>
&nbsp;&nbsp;2. OR go to nearest CSC (Common Service Centre)<br>
&nbsp;&nbsp;3. OR contact Patwari / Agriculture Officer<br>
<b>Check Payment Status:</b><br>
&nbsp;&nbsp;â€¢ pmkisan.gov.in â†’ Beneficiary Status<br>
&nbsp;&nbsp;â€¢ SMS: PM-KISAN REG to 155261<br>
<b>Helpline:</b> 155261 | 011-24300606 (Monâ€“Fri, 9amâ€“6pm)<br>
<b>eKYC:</b> Must do eKYC at CSC or pmkisan.gov.in to continue getting payments`
    },
    {
      kw:["ayushman","pmjay","health card","golden card","free hospital","5 lakh","free treatment"],
      a:`ğŸ¥ <b>Ayushman Bharat PMJAY â€” Health Insurance</b><br><br>
<b>Benefit:</b> FREE health cover up to â‚¹5 lakh per family per year<br>
<b>Covers:</b> Hospitalization, surgery, ICU, medicines, diagnostics (1500+ procedures)<br>
<b>Who is Eligible:</b> SECC-2011 listed families + State-added beneficiaries<br>
<b>Check Eligibility:</b><br>
&nbsp;&nbsp;â€¢ Visit mera.pmjay.gov.in<br>
&nbsp;&nbsp;â€¢ Call 14555 (free helpline)<br>
&nbsp;&nbsp;â€¢ Visit nearest Ayushman Mitra at empanelled hospital<br>
<b>Get Ayushman Card:</b><br>
&nbsp;&nbsp;â€¢ Visit nearest CSC or empanelled hospital<br>
&nbsp;&nbsp;â€¢ Need: Aadhaar + Mobile number<br>
&nbsp;&nbsp;â€¢ Card is FREE to make<br>
<b>How to Avail Treatment:</b><br>
&nbsp;&nbsp;1. Show Ayushman card at empanelled hospital<br>
&nbsp;&nbsp;2. Cashless treatment â€” NO advance payment needed<br>
&nbsp;&nbsp;3. Works at 25,000+ hospitals across India<br>
<b>Ab Har Ghar Ayushman:</b> Now covers all citizens above 70 years<br>
<b>Helpline:</b> 14555 | 1800-111-565 (24x7 free)`
    },
    {
      kw:["ration","food","pds","ration card","anna","free grain","nfsa"],
      a:`ğŸŒ¾ <b>Public Distribution System (Ration) Guide</b><br><br>
<b>PMGKAY (Free Grain):</b> 5 kg free grain per person/month (rice/wheat)<br>
<b>NFSA Subsidized Grain:</b> BPL families â€” 5 kg/person at â‚¹1â€“3/kg<br>
<b>Ration Card Types:</b><br>
&nbsp;&nbsp;â€¢ Antyodaya (AAY) â€” Poorest of poor: 35 kg/month/family<br>
&nbsp;&nbsp;â€¢ Priority (PHH) â€” BPL: 5 kg/person/month<br>
&nbsp;&nbsp;â€¢ Above Poverty Line (APL) â€” subsidized rates<br>
<b>One Nation One Ration Card (ONORC):</b><br>
&nbsp;&nbsp;â€¢ Use your ration card in ANY state in India<br>
&nbsp;&nbsp;â€¢ No need to transfer card when migrating for work<br>
<b>Apply for New Ration Card:</b><br>
&nbsp;&nbsp;â€¢ Visit District Supply Office or State Food portal<br>
&nbsp;&nbsp;â€¢ Documents: Aadhaar, photo, income proof, residence proof<br>
<b>How to Collect Ration:</b><br>
&nbsp;&nbsp;â€¢ Go to assigned Fair Price Shop (FPS/Ration Shop)<br>
&nbsp;&nbsp;â€¢ Biometric authentication with Aadhaar at e-POS machine<br>
<b>Complaint:</b> Call 1800-180-1007 (toll free) or report on nfsa.gov.in`
    },
    {
      kw:["kcc","kisan credit card","farmer loan","crop loan","bank loan","interest subsidy"],
      a:`ğŸ¦ <b>Kisan Credit Card (KCC) â€” Farmer Loan</b><br><br>
<b>Benefit:</b> Revolving credit for farming at only <b>4% effective interest</b> (with 3% subvention)<br>
<b>Credit Limit:</b> Based on landholding + crop scale of finance<br>&nbsp;&nbsp;(Typically â‚¹1.6 lakh for 1 acre rice/wheat)<br>
<b>Who can apply:</b> All farmers, tenant farmers, sharecroppers, SHG members<br>
<b>Documents:</b><br>
&nbsp;&nbsp;â€¢ Aadhaar + PAN card<br>
&nbsp;&nbsp;â€¢ Land records (Khasra / Khatauni)<br>
&nbsp;&nbsp;â€¢ Passport photo<br>
&nbsp;&nbsp;â€¢ Bank account<br>
<b>How to Apply:</b><br>
&nbsp;&nbsp;â€¢ Visit nearest nationalized bank branch (SBI, PNB, Canara, etc.)<br>
&nbsp;&nbsp;â€¢ OR apply online on bank's website / PM-KISAN portal<br>
<b>Validity:</b> 5 years with annual renewal<br>
<b>Additional Benefits:</b><br>
&nbsp;&nbsp;â€¢ Automatic crop insurance under PMFBY<br>
&nbsp;&nbsp;â€¢ Personal accident cover â‚¹50,000<br>
&nbsp;&nbsp;â€¢ Can use as ATM card for withdrawals<br>
<b>Kisan Helpline:</b> 1800-180-1551 (free)`
    },
    {
      kw:["pmfby","crop insurance","fasal bima","crop loss claim"],
      a:`ğŸŒ¾ <b>PM Fasal Bima Yojana (PMFBY) â€” Crop Insurance</b><br><br>
<b>What it covers:</b> Crop loss due to drought, flood, pest, disease, hailstorm<br>
<b>Premium (Very Low):</b><br>
&nbsp;&nbsp;â€¢ Kharif crops: 2% of Sum Insured<br>
&nbsp;&nbsp;â€¢ Rabi crops: 1.5% of Sum Insured<br>
&nbsp;&nbsp;â€¢ Horticulture: 5% of Sum Insured<br>
<b>How to Enroll:</b><br>
&nbsp;&nbsp;â€¢ KCC farmers: Auto-enrolled (may opt-out if desired)<br>
&nbsp;&nbsp;â€¢ Non-KCC: Apply at bank, CSC, or pmfby.gov.in<br>
&nbsp;&nbsp;â€¢ Deadline: 15 days before sowing cutoff date<br>
<b>How to Claim:</b><br>
&nbsp;&nbsp;1. Intimate loss to insurance company within 72 hours of damage<br>
&nbsp;&nbsp;2. Call crop loss helpline: 14447<br>
&nbsp;&nbsp;3. OR notify through bank or CSC<br>
&nbsp;&nbsp;4. Or SMS crop loss details to registered mobile<br>
<b>Claim Processing:</b> Within 30 days of harvest; directly to bank account<br>
<b>Mid-Season Calamity:</b> 25% advance payment given immediately<br>
<b>Helpline:</b> 14447 | pmfby.gov.in`
    },
    {
      kw:["mgnrega","nrega","mahatma gandhi","job card","100 days work","mnrega"],
      a:`ğŸ—ï¸ <b>MGNREGA â€” 100 Days Work Guarantee</b><br><br>
<b>What it is:</b> Legal guarantee of 100 days paid work per household per year<br>
<b>Wage:</b> State-wise wage (â‚¹220â€“â‚¹357/day); paid directly to bank/PO account<br>
<b>Who can apply:</b> Any adult rural household member (willing to do unskilled work)<br>
<b>How to Register:</b><br>
&nbsp;&nbsp;â€¢ Visit Gram Panchayat with Aadhaar + photo<br>
&nbsp;&nbsp;â€¢ Get Job Card (free, within 15 days of application)<br>
<b>How to Get Work:</b><br>
&nbsp;&nbsp;â€¢ Write application to Gram Panchayat requesting work<br>
&nbsp;&nbsp;â€¢ Work must be provided within 15 days or unemployment allowance paid<br>
<b>Type of Work:</b> Water conservation, road construction, planting trees, farm ponds, etc.<br>
<b>Check Work & Payment:</b><br>
&nbsp;&nbsp;â€¢ nrega.nic.in â†’ Enter state â†’ district â†’ Gram Panchayat<br>
&nbsp;&nbsp;â€¢ NREGASoft App<br>
<b>Complaint:</b> Gram Sabha or State Ombudsman<br>
<b>Helpline:</b> 1800-111-555 (free)`
    },
    {
      kw:["pm awas","housing","pmay","pucca house","home","gramin","awas yojana"],
      a:`ğŸ  <b>PM Awas Yojana Gramin (PMAY-G)</b><br><br>
<b>Benefit:</b> â‚¹1.20 lakh (plains) / â‚¹1.30 lakh (hills/NE) for building pucca house<br>
<b>Plus:</b> 90 days MGNREGA wages for construction labour<br>
<b>Plus:</b> Swachh Bharat Mission toilet grant â‚¹12,000<br>
<b>Who is Eligible:</b> SECC-2011 listed homeless or kutcha house families<br>
<b>Payment:</b> Directly to bank in 3â€“4 instalments linked to construction progress<br>
<b>How to Check:</b><br>
&nbsp;&nbsp;â€¢ pmayg.nic.in â†’ Beneficiary Search<br>
&nbsp;&nbsp;â€¢ Or visit Gram Panchayat<br>
<b>How to Apply:</b><br>
&nbsp;&nbsp;â€¢ Through Gram Panchayat / Block Development Office<br>
&nbsp;&nbsp;â€¢ Beneficiaries selected from SECC list by Gram Sabha<br>
<b>Helpline:</b> 1800-116-446 (free)`
    },
    {
      kw:["ujjwala","lpg","gas connection","free gas","cooking gas","cylinder"],
      a:`ğŸ”¥ <b>PM Ujjwala Yojana â€” Free LPG Connection</b><br><br>
<b>Benefit:</b> Free LPG connection + first cylinder free + stove (for BPL families)<br>
<b>Who is Eligible:</b><br>
&nbsp;&nbsp;â€¢ BPL, SECC-2011, SC/ST, PM Awas beneficiaries<br>
&nbsp;&nbsp;â€¢ Women above 18 years only (in her name)<br>
<b>Documents:</b><br>
&nbsp;&nbsp;â€¢ Aadhaar card<br>
&nbsp;&nbsp;â€¢ BPL ration card / SECC proof<br>
&nbsp;&nbsp;â€¢ Bank passbook<br>
<b>How to Apply:</b><br>
&nbsp;&nbsp;â€¢ Visit nearest LPG distributor (HP Gas, Indane, Bharat Gas)<br>
&nbsp;&nbsp;â€¢ Fill KYC-3 form (free)<br>
&nbsp;&nbsp;â€¢ Or apply online at pmuy.gov.in<br>
<b>Subsidy on Refills:</b><br>
&nbsp;&nbsp;â€¢ 12 subsidized cylinders per year via DBT to bank account<br>
&nbsp;&nbsp;â€¢ Check subsidy status: mylpg.in<br>
<b>Helpline:</b> 1800-233-3555 (HP Gas) | 1800-180-3333 (Bharat Gas)`
    }
  ],

  education:[
    {
      kw:["scholarship","study","school fees","student","student scholarship","chhatravritti"],
      a:`ğŸ“š <b>Student Scholarships â€” Complete List</b><br><br>
<b>1. National Means-cum-Merit Scholarship (NMMS):</b><br>
&nbsp;&nbsp;â€¢ â‚¹12,000/year for Class 9â€“12<br>
&nbsp;&nbsp;â€¢ For govt school students; family income < â‚¹3.5 lakh/year<br>
&nbsp;&nbsp;â€¢ Apply through State Scholarship Portal<br>
<b>2. Pre-Matric Scholarship (Class 1â€“10):</b><br>
&nbsp;&nbsp;â€¢ For SC/ST/OBC/Minority students<br>
&nbsp;&nbsp;â€¢ Amount: â‚¹150â€“â‚¹350/month + â‚¹750 one-time grant<br>
<b>3. Post-Matric Scholarship (Class 11 onwards):</b><br>
&nbsp;&nbsp;â€¢ Full tuition fees + maintenance allowance<br>
&nbsp;&nbsp;â€¢ For SC (Ministry of Social Justice) / ST (Ministry of Tribal) / OBC / Minority<br>
<b>4. Begum Hazrat Mahal (Minority Girls):</b><br>
&nbsp;&nbsp;â€¢ â‚¹5,000â€“â‚¹6,000/year for Class 9â€“12<br>
<b>5. PM Scholarship for Wards of Ex-Servicemen:</b><br>
&nbsp;&nbsp;â€¢ â‚¹2,500â€“â‚¹3,000/month for technical education<br>
<b>Apply at:</b> scholarships.gov.in (National Scholarship Portal)<br>
<b>Deadline:</b> Sepâ€“Oct each year (check exact dates)<br>
<b>Documents:</b> Marksheet, caste/income certificate, Aadhaar, bank account<br>
<b>Helpline:</b> 0120-6619540`
    },
    {
      kw:["literacy","read","write","learn","adult education","ULLAS","padna","likhna"],
      a:`ğŸ“– <b>Adult Literacy & ULLAS Program</b><br><br>
<b>ULLAS (New India Literacy Program):</b><br>
&nbsp;&nbsp;â€¢ FREE education for adults 15 years and above<br>
&nbsp;&nbsp;â€¢ Goal: Make 5 crore people literate by 2027<br>
&nbsp;&nbsp;â€¢ Covers: Reading, writing, numeracy, digital skills, financial literacy<br>
<b>How to Join:</b><br>
&nbsp;&nbsp;â€¢ Visit nearest primary school or Gram Panchayat<br>
&nbsp;&nbsp;â€¢ Contact headmaster or ASHA/Anganwadi worker<br>
&nbsp;&nbsp;â€¢ No age limit, no fees, no exams to join<br>
<b>Classes:</b> Morning or evening sessions at local school (flexible timing)<br>
<b>Materials:</b> Free books in regional languages (provided by government)<br>
<b>Volunteer Teachers:</b> School students teach adults in their community<br>
<b>Digital Literacy:</b><br>
&nbsp;&nbsp;â€¢ PMGDISHA: Free digital training (internet, phone, UPI, email)<br>
&nbsp;&nbsp;â€¢ 3 months course at nearest CSC<br>
&nbsp;&nbsp;â€¢ pmgdisha.in to find nearest centre<br>
<b>Helpline:</b> 1800-180-9588`
    },
    {
      kw:["skill","training","vocational","ITI","pradhan mantri kaushal","job skills"],
      a:`ğŸ”§ <b>Skill Development & Vocational Training</b><br><br>
<b>PMKVY (PM Kaushal Vikas Yojana):</b><br>
&nbsp;&nbsp;â€¢ FREE short-term skill training (3 weeks to 3 months)<br>
&nbsp;&nbsp;â€¢ 300+ courses: Electrician, Plumber, Beautician, Solar Tech, Tailoring, IT, etc.<br>
&nbsp;&nbsp;â€¢ After training: Certificate + â‚¹8,000 reward + job placement help<br>
&nbsp;&nbsp;â€¢ Find centre: skillindiadigital.gov.in<br>
<b>ITI (Industrial Training Institutes):</b><br>
&nbsp;&nbsp;â€¢ 1â€“2 year trade certificate courses<br>
&nbsp;&nbsp;â€¢ Trades: Fitter, Turner, Welder, Electrician, Mechanic<br>
&nbsp;&nbsp;â€¢ Admission: Class 8/10 pass; apply through state portal in Juneâ€“July<br>
<b>RSETI (Rural Self Employment Training):</b><br>
&nbsp;&nbsp;â€¢ 100+ free courses for rural youth<br>
&nbsp;&nbsp;â€¢ Focus on self-employment: Agro-based, livestock, trade<br>
&nbsp;&nbsp;â€¢ Available at all districts; run by banks<br>
<b>PMEGP:</b> Up to 25% subsidy on self-employment projects<br>
<b>Helpline:</b> Skill India: 1800-123-9626 (free)`
    },
    {
      kw:["mid day meal","school meal","poshan","mid-day","mdm"],
      a:`ğŸ± <b>Mid-Day Meal / PM POSHAN Scheme</b><br><br>
<b>What it is:</b> FREE cooked meal every school day for students in Govt schools<br>
<b>Who gets it:</b> All children in Class 1â€“8 in government & aided schools<br>
<b>Meal Content (per child per day):</b><br>
&nbsp;&nbsp;â€¢ Primary (Class 1â€“5): 450 calories + 12g protein<br>
&nbsp;&nbsp;â€¢ Upper Primary (Class 6â€“8): 700 calories + 20g protein<br>
&nbsp;&nbsp;â€¢ Includes: Rice/Chapati, Dal, Vegetables, eggs/milk (in many states)<br>
<b>Why Important:</b><br>
&nbsp;&nbsp;â€¢ Improves school attendance significantly<br>
&nbsp;&nbsp;â€¢ Fights malnutrition and anemia in children<br>
&nbsp;&nbsp;â€¢ Free for all â€” no separate registration needed<br>
<b>If not provided at school:</b> Complain to Block Education Officer or call helpline<br>
<b>National Helpline:</b> 1800-180-8004`
    }
  ],

  livestock:[
    {
      kw:["cow","cattle","buffalo","dairy","milk","pashu","gai","bhains"],
      a:`ğŸ„ <b>Cattle & Buffalo Farming Guide</b><br><br>
<b>High-Yield Breeds:</b><br>
&nbsp;&nbsp;â€¢ Cows: HF (Holstein Friesian), Jersey, Gir, Sahiwal<br>
&nbsp;&nbsp;â€¢ Buffaloes: Murrah, Surti, Jaffarabadi<br>
&nbsp;&nbsp;â€¢ Hybrid cows: HFÃ—Sahiwal cross â€” best for small farmers<br>
<b>Feeding (per animal per day):</b><br>
&nbsp;&nbsp;â€¢ Dry fodder: 5â€“10 kg (straw/silage)<br>
&nbsp;&nbsp;â€¢ Green fodder: 15â€“20 kg (Napier grass, maize, bajra)<br>
&nbsp;&nbsp;â€¢ Concentrate: 1â€“1.5 kg per 2.5 litre milk produced<br>
&nbsp;&nbsp;â€¢ Clean water: 40â€“60 litres/day<br>
&nbsp;&nbsp;â€¢ Mineral mixture: 50g/day (prevents milk fever, reproductive issues)<br>
<b>Vaccination Schedule (Mandatory):</b><br>
&nbsp;&nbsp;â€¢ FMD (Foot & Mouth Disease): Every 6 months (FREE by govt)<br>
&nbsp;&nbsp;â€¢ HS (Hemorrhagic Septicemia): Before monsoon every year<br>
&nbsp;&nbsp;â€¢ BQ (Black Quarter): Annually before monsoon<br>
&nbsp;&nbsp;â€¢ Brucellosis: Calves 4â€“8 months (once in lifetime)<br>
<b>Deworming:</b> Every 6 months with Albendazole (10mg/kg body weight)<br>
<b>Housing:</b> Clean shed, 40 sq ft/animal, proper drainage, no dampness<br>
<b>Helpline:</b> 1962 (Pashu Helpline, free 24Ã—7)`
    },
    {
      kw:["goat","bakri","sheep","sheep farming","goat rearing","small ruminant"],
      a:`ğŸ <b>Goat & Sheep Farming Guide</b><br><br>
<b>Popular Breeds:</b><br>
&nbsp;&nbsp;â€¢ Goat (Meat): Boer, Sirohi, Barbari, Osmanabadi<br>
&nbsp;&nbsp;â€¢ Goat (Milk): Jamunapari, Beetal<br>
&nbsp;&nbsp;â€¢ Sheep (Wool): Merino, Chokla | Sheep (Meat): Nellore, Deccani<br>
<b>Feeding:</b><br>
&nbsp;&nbsp;â€¢ Pasture grazing 6â€“8 hours/day<br>
&nbsp;&nbsp;â€¢ Supplement with 200â€“300g concentrate for pregnant/lactating goats<br>
&nbsp;&nbsp;â€¢ Mineral block should always be available<br>
<b>Health Management:</b><br>
&nbsp;&nbsp;â€¢ PPR Vaccination (Goat Plague): Every year (FREE at govt vet centre)<br>
&nbsp;&nbsp;â€¢ Enterotoxaemia (ET): Annually before monsoon<br>
&nbsp;&nbsp;â€¢ FMD: Every 6 months for goats in endemic areas<br>
&nbsp;&nbsp;â€¢ Deworming: Every 3 months<br>
<b>Common Problems:</b><br>
&nbsp;&nbsp;â€¢ Bloat (gas in stomach): Stand goat upright, massage, give 50ml mustard oil<br>
&nbsp;&nbsp;â€¢ Diarrhea: ORS + electrolytes + consult vet<br>
<b>Profit Potential:</b> Goat gives 2 kids/year; market value â‚¹3,000â€“â‚¹8,000/kid<br>
<b>Scheme:</b> National Livestock Mission â€” subsidy for goat unit setup`
    },
    {
      kw:["poultry","chicken","hen","murgi","egg","backyard poultry","broiler","layer"],
      a:`ğŸ“ <b>Poultry Farming Guide</b><br><br>
<b>Types:</b><br>
&nbsp;&nbsp;â€¢ Layer birds: Egg production (300+ eggs/year per hen)<br>
&nbsp;&nbsp;â€¢ Broiler birds: Meat in 6 weeks (1.8â€“2 kg body weight)<br>
&nbsp;&nbsp;â€¢ Backyard poultry (Desi/Kadaknath): Low cost, high price<br>
<b>Housing:</b><br>
&nbsp;&nbsp;â€¢ 1 sq ft/bird (cage) or 2 sq ft (floor)<br>
&nbsp;&nbsp;â€¢ Ventilation, no dampness, protection from rain and predators<br>
<b>Feeding:</b><br>
&nbsp;&nbsp;â€¢ Starter feed (0â€“3 weeks): 23% protein<br>
&nbsp;&nbsp;â€¢ Grower feed (3â€“6 weeks): 20% protein<br>
&nbsp;&nbsp;â€¢ Layer feed: 16% protein + extra calcium<br>
<b>Vaccination:</b><br>
&nbsp;&nbsp;â€¢ Ranikhet (ND): Day 7 + Day 28 + every 3 months<br>
&nbsp;&nbsp;â€¢ Gumboro (IBD): Day 14 + Day 28<br>
&nbsp;&nbsp;â€¢ Fowl Pox: 6 weeks of age<br>
<b>Biosecurity:</b> Keep visitors away; disinfect shed regularly<br>
<b>Scheme:</b> NABARD loan + 25% subsidy for poultry unit<br>
<b>Helpline:</b> 1962 Pashu Helpline`
    },
    {
      kw:["fish","fishery","pond","aquaculture","fishing","machli"],
      a:`ğŸŸ <b>Fish Farming / Aquaculture Guide</b><br><br>
<b>Suitable Fish Species:</b><br>
&nbsp;&nbsp;â€¢ Indian Major Carps: Rohu, Catla, Mrigal (most popular)<br>
&nbsp;&nbsp;â€¢ Pangasius â€” fast growing, high demand<br>
&nbsp;&nbsp;â€¢ Tilapia â€” hardy, disease resistant<br>
<b>Pond Preparation:</b><br>
&nbsp;&nbsp;â€¢ Drain, dry and lime the pond (250 kg CaO/hectare)<br>
&nbsp;&nbsp;â€¢ Apply cow dung manure 1000 kg/hectare<br>
&nbsp;&nbsp;â€¢ Fill 1â€“1.5 metre water depth<br>
<b>Stocking:</b> 5,000â€“8,000 fingerlings/hectare (polyculture of 3 species)<br>
<b>Feeding:</b><br>
&nbsp;&nbsp;â€¢ Rice bran + groundnut cake (1:1) â€” 2% of fish body weight/day<br>
&nbsp;&nbsp;â€¢ Supplement with soybean meal for better growth<br>
<b>Harvest:</b> 8â€“12 months for 1â€“1.5 kg size fish<br>
<b>Yield:</b> 3,000â€“5,000 kg/hectare/year<br>
<b>PM Matsya Sampada Yojana:</b><br>
&nbsp;&nbsp;â€¢ 40â€“60% subsidy for pond construction and equipment<br>
&nbsp;&nbsp;â€¢ Apply at district fisheries office<br>
<b>Helpline:</b> 1800-425-1660`
    }
  ],

  finance:[
    {
      kw:["save money","saving","bachat","savings","piggy bank","recurring deposit"],
      a:`ğŸ’° <b>Smart Savings for Rural Families</b><br><br>
<b>Post Office Savings Schemes:</b><br>
&nbsp;&nbsp;â€¢ <b>Sukanya Samriddhi (for girl child):</b> 8.2% interest â€” best scheme!<br>&nbsp;&nbsp;Min â‚¹250/year; max â‚¹1.5 lakh/year; tax-free maturity<br>
&nbsp;&nbsp;â€¢ <b>PPF (Public Provident Fund):</b> 7.1% interest, 15-year lock-in, tax-free<br>
&nbsp;&nbsp;â€¢ <b>NSC (National Savings Certificate):</b> 7.7%, 5-year deposit, guaranteed<br>
&nbsp;&nbsp;â€¢ <b>RD (Recurring Deposit):</b> Save â‚¹100/month; good for regular income families<br>
<b>Jan Dhan Account:</b><br>
&nbsp;&nbsp;â€¢ Zero balance account at any bank<br>
&nbsp;&nbsp;â€¢ Comes with RuPay debit card + â‚¹2 lakh accident insurance FREE<br>
&nbsp;&nbsp;â€¢ Overdraft facility of â‚¹10,000 after 6 months<br>
<b>Financial Tips:</b><br>
&nbsp;&nbsp;â€¢ Avoid money lenders â€” interest 2â€“5% per month is exploitative<br>
&nbsp;&nbsp;â€¢ Use SHG (Self Help Group) for micro-savings and credit<br>
&nbsp;&nbsp;â€¢ Never put all savings in one place<br>
<b>Open account at:</b> Any nationalized bank or post office (Aadhaar required)`
    },
    {
      kw:["shg","self help group","mahila mandal","women group","micro finance","bachat gat"],
      a:`ğŸ‘©â€ğŸ‘©â€ğŸ‘§ <b>Self Help Groups (SHG) â€” How to Benefit</b><br><br>
<b>What is SHG?</b> Group of 10â€“20 women who save together and support each other<br>
<b>Benefits of Joining SHG:</b><br>
&nbsp;&nbsp;â€¢ Pool savings â†’ get loans at low interest (1â€“2%/month)<br>
&nbsp;&nbsp;â€¢ No collateral needed for loans<br>
&nbsp;&nbsp;â€¢ Bank loan linkage: â‚¹1â€“10 lakh for group business<br>
&nbsp;&nbsp;â€¢ Government schemes accessed easily as a group<br>
<b>How to Form SHG:</b><br>
&nbsp;&nbsp;â€¢ 10â€“20 women from same village/locality<br>
&nbsp;&nbsp;â€¢ Open a group bank account<br>
&nbsp;&nbsp;â€¢ Save â‚¹50â€“â‚¹200/month each; maintain records<br>
&nbsp;&nbsp;â€¢ Register with Block Development Office for recognition<br>
<b>Government Support:</b><br>
&nbsp;&nbsp;â€¢ NRLM (DAY-NRLM): Revolving fund â‚¹15,000 + Community Investment Fund<br>
&nbsp;&nbsp;â€¢ Bank loan at 7% interest (subsidized)<br>
&nbsp;&nbsp;â€¢ Lakhpati Didi program: Help each SHG member earn â‚¹1 lakh/year<br>
<b>Contact:</b> Gram Panchayat or Block Mission Management Unit`
    },
    {
      kw:["mudra loan","business loan","small business","self employment","startup loan","enterprise"],
      a:`ğŸ¢ <b>MUDRA Loan â€” Business Finance</b><br><br>
<b>PM MUDRA Yojana:</b> Loans for small/micro businesses without collateral<br>
<b>Three Categories:</b><br>
&nbsp;&nbsp;â€¢ <b>Shishu:</b> Up to â‚¹50,000 (new/very small businesses)<br>
&nbsp;&nbsp;â€¢ <b>Kishore:</b> â‚¹50,001 to â‚¹5 lakh (growing businesses)<br>
&nbsp;&nbsp;â€¢ <b>Tarun:</b> â‚¹5 lakh to â‚¹10 lakh (established businesses)<br>
<b>Who can apply:</b><br>
&nbsp;&nbsp;â€¢ Any non-farm micro/small business<br>
&nbsp;&nbsp;â€¢ Street vendors, shops, artisans, tailors, repair shops<br>
&nbsp;&nbsp;â€¢ Vegetable/fruit sellers, food stalls, beauty parlours<br>
<b>Documents:</b> Aadhaar + PAN + bank statement + business proof/plan<br>
<b>How to Apply:</b><br>
&nbsp;&nbsp;â€¢ Visit any bank or NBFC branch<br>
&nbsp;&nbsp;â€¢ Apply online: mudra.org.in<br>
&nbsp;&nbsp;â€¢ Or through Udyami Mitra portal<br>
<b>Interest Rate:</b> 10â€“12% (varies by bank; no collateral for Shishu/Kishore)<br>
<b>Helpline:</b> 1800-180-1111 (SIDBI)`
    },
    {
      kw:["upi","digital payment","phonepe","gpay","paytm","online payment","mobile banking"],
      a:`ğŸ“± <b>Digital Payments â€” Easy Guide</b><br><br>
<b>UPI (Unified Payment Interface):</b><br>
&nbsp;&nbsp;â€¢ Send/receive money instantly using mobile number or UPI ID<br>
&nbsp;&nbsp;â€¢ Completely FREE â€” no transaction charges<br>
&nbsp;&nbsp;â€¢ Apps: PhonePe, Google Pay (GPay), BHIM, Paytm, Amazon Pay<br>
<b>How to Set Up:</b><br>
&nbsp;&nbsp;1. Download any UPI app<br>
&nbsp;&nbsp;2. Register with mobile number linked to bank<br>
&nbsp;&nbsp;3. Set 4-digit UPI PIN (keep secret!)<br>
&nbsp;&nbsp;4. Start sending/receiving money<br>
<b>Safety Rules:</b><br>
&nbsp;&nbsp;â€¢ âš ï¸ NEVER share UPI PIN or OTP with anyone<br>
&nbsp;&nbsp;â€¢ Bank/govt never asks for PIN on call â€” it's a fraud<br>
&nbsp;&nbsp;â€¢ Check receiver's name before sending<br>
&nbsp;&nbsp;â€¢ For receiving money â€” you don't need to enter PIN<br>
<b>Aadhaar Enabled Payment (AePS):</b><br>
&nbsp;&nbsp;â€¢ Use fingerprint at nearest CSC/bank BC to withdraw money<br>
&nbsp;&nbsp;â€¢ No mobile or internet needed for this!<br>
<b>Report Fraud:</b> Call 1930 (Cyber Crime Helpline) immediately`
    }
  ],

  market:[
    {
      kw:["market price","mandi","sabzi","vegetable price","crop price","mandibhav","wholesale"],
      a:`ğŸ“Š <b>Crop Market Price Information</b><br><br>
<b>Where to Check Live Mandi Prices (Free):</b><br>
&nbsp;&nbsp;â€¢ <b>Agmarknet:</b> agmarknet.nic.in â€” official govt mandi prices<br>
&nbsp;&nbsp;â€¢ <b>eNAM Portal:</b> enam.gov.in â€” national electronic market<br>
&nbsp;&nbsp;â€¢ <b>Kisan Suvidha App:</b> Market prices + weather + crop advisory<br>
&nbsp;&nbsp;â€¢ <b>SMS:</b> Send crop name + state to 55444 for price<br>
<b>MSP (Minimum Support Price) 2024â€“25:</b><br>
&nbsp;&nbsp;â€¢ Paddy (Common): â‚¹2,300/quintal<br>
&nbsp;&nbsp;â€¢ Wheat: â‚¹2,275/quintal<br>
&nbsp;&nbsp;â€¢ Maize: â‚¹2,090/quintal<br>
&nbsp;&nbsp;â€¢ Tur Dal: â‚¹7,550/quintal<br>
&nbsp;&nbsp;â€¢ Moong: â‚¹8,682/quintal<br>
&nbsp;&nbsp;â€¢ Cotton (Medium): â‚¹7,121/quintal<br>
&nbsp;&nbsp;â€¢ Soybean: â‚¹4,892/quintal<br>
<b>Sell at MSP:</b><br>
&nbsp;&nbsp;â€¢ Register on PM-KISAN/State portal for MSP procurement<br>
&nbsp;&nbsp;â€¢ Bring produce to nearest procurement centre with Aadhaar + land record<br>
<b>FPO/Cooperatives:</b> Join for better collective bargaining and direct market access`
    },
    {
      kw:["fpo","farmer producer","cooperative","collective farming","group selling"],
      a:`ğŸ¤ <b>Farmer Producer Organizations (FPO) Guide</b><br><br>
<b>What is FPO?</b> A group of farmers who collectively produce, process and sell their produce<br>
<b>Benefits of Joining FPO:</b><br>
&nbsp;&nbsp;â€¢ Buy inputs (seed, fertilizer) at wholesale rates â€” saves 15â€“20%<br>
&nbsp;&nbsp;â€¢ Sell produce directly to buyers â€” better price<br>
&nbsp;&nbsp;â€¢ Access to cold storage, processing facilities<br>
&nbsp;&nbsp;â€¢ Bank loan as group is easier<br>
&nbsp;&nbsp;â€¢ Export directly to foreign markets<br>
<b>Government Support for FPOs:</b><br>
&nbsp;&nbsp;â€¢ â‚¹18 lakh equity grant per FPO under Agri Infrastructure Fund<br>
&nbsp;&nbsp;â€¢ NABARD + SFAC provide handholding support<br>
&nbsp;&nbsp;â€¢ 3 year support from Cluster Based Business Organisations (CBBO)<br>
<b>10,000 FPO Scheme:</b><br>
&nbsp;&nbsp;â€¢ Govt forming 10,000 new FPOs across India<br>
&nbsp;&nbsp;â€¢ Minimum 300 members (100 for hill areas)<br>
<b>How to Join/Form:</b> Contact nearest ATMA office, NABARD or Krishi Vigyan Kendra<br>
<b>Find FPO in your area:</b> sfacindia.com or enam.gov.in`
    },
    {
      kw:["cold storage","storage","warehouse","sell after season","store crop","silos"],
      a:`ğŸ­ <b>Crop Storage & Post-Harvest Management</b><br><br>
<b>Why Store Crops?</b> Sell when prices are high â€” not immediately after harvest when prices are low<br>
<b>Warehouse Receipt System:</b><br>
&nbsp;&nbsp;â€¢ Store grain in WDRA-registered warehouse<br>
&nbsp;&nbsp;â€¢ Get receipt â€” use it as collateral for 70% bank loan<br>
&nbsp;&nbsp;â€¢ Sell when prices rise; repay loan<br>
&nbsp;&nbsp;â€¢ Find warehouse: wdra.gov.in<br>
<b>Government Schemes:</b><br>
&nbsp;&nbsp;â€¢ <b>Agriculture Infrastructure Fund:</b> 3% interest subsidy for cold storage/warehouse<br>
&nbsp;&nbsp;â€¢ <b>Grameen Bhandaran Yojana:</b> Subsidy for rural godowns<br>
&nbsp;&nbsp;â€¢ <b>NABARD:</b> Loan for cold chain infrastructure<br>
<b>On-Farm Storage Tips:</b><br>
&nbsp;&nbsp;â€¢ Dry grain to safe moisture (rice: 14%, wheat: 12%)<br>
&nbsp;&nbsp;â€¢ Use metal bins (pusa bins) to prevent pest damage<br>
&nbsp;&nbsp;â€¢ Hermetic storage bags (IRRI Super Bag) â€” pest-free for 6+ months<br>
&nbsp;&nbsp;â€¢ Apply Aluminium Phosphide tablets in bags for grain protection<br>
<b>Avoid:</b> Storing wet grain â€” leads to fungal growth (mycotoxins)`
    }
  ]
};

/* ============================================================
   GLOBAL STATE
============================================================ */
let topic='all', lang='en-IN', msgCount=0, totalBytes=0;
let autoTTS=false, soundOn=true, darkMode=false, saverMode=false;
let isListening=false, recognition=null;
const synth=window.speechSynthesis;
let sessionStart=Date.now(), chatLog=[];

/* ============================================================
   INIT
============================================================ */
window.onload=()=>{
  checkOnline();
  window.addEventListener('online',  checkOnline);
  window.addEventListener('offline', checkOnline);
  startSessionTimer();
  loadWeather();
  setTimeout(()=>{
    botMsg(
      "ğŸ‘‹ <b>Namaste! I am Gram Sahayak AI</b> ğŸŒ¾<br><br>"+
      "I am your offline-ready rural assistant. I can help you with:<br>"+
      "ğŸŒ± Agriculture & Crops &nbsp;|&nbsp; â¤ï¸ Health & First Aid<br>"+
      "ğŸŒ¦ï¸ Weather Advisory &nbsp;|&nbsp; ğŸ›ï¸ Government Schemes<br>"+
      "ğŸ“š Education &nbsp;|&nbsp; ğŸ„ Livestock &nbsp;|&nbsp; ğŸ’° Finance &nbsp;|&nbsp; ğŸ“Š Market<br><br>"+
      "<i>Type your question below or tap ğŸ™ï¸ to speak!</i>",
      ['Rice farming tips','How to treat fever','PM KISAN details','Cow rearing guide']
    );
  },500);
};

/* ============================================================
   ONLINE / OFFLINE
============================================================ */
function checkOnline(){
  const off=!navigator.onLine;
  document.getElementById('offlineBanner').style.display=off?'block':'none';
  document.getElementById('statusText').textContent=off?'Offline':'Online';
  document.getElementById('modeText').textContent=off?'Offline KB':'Normal';
}

/* ============================================================
   SESSION TIMER
============================================================ */
function startSessionTimer(){
  setInterval(()=>{
    const s=Math.floor((Date.now()-sessionStart)/1000);
    const m=Math.floor(s/60), ss=s%60;
    document.getElementById('sessionTime').textContent=
      m+':'+(ss<10?'0':'')+ss;
  },1000);
}

/* ============================================================
   TOPIC
============================================================ */
function setTopic(t,btn){
  topic=t;
  document.querySelectorAll('.tbtn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}

/* ============================================================
   LANGUAGE
============================================================ */
function changeLanguage(){
  lang=document.getElementById('langSelect').value||
       document.getElementById('modalLang').value;
  document.getElementById('langSelect').value=lang;
  document.getElementById('modalLang').value=lang;
  if(recognition) recognition.lang=lang;
}

/* ============================================================
   KEYBOARD
============================================================ */
function handleKey(e){
  if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}
}

function autoResize(el){
  el.style.height='auto';
  el.style.height=Math.min(el.scrollHeight,90)+'px';
}

/* ============================================================
   SEND MESSAGE
============================================================ */
function sendMessage(txt){
  const inp=document.getElementById('userInput');
  const msg=(txt||inp.value).trim();
  if(!msg)return;
  inp.value=''; inp.style.height='auto';
  // Hide quick cards after first message
  document.getElementById('qaGrid').style.display='none';
  userMsg(msg);
  setTimeout(()=>processQuery(msg), 700);
}

/* ============================================================
   USER BUBBLE
============================================================ */
function userMsg(text){
  msgCount++; totalBytes+=text.length; updateStats();
  chatLog.push({role:'user',text,time:getTime()});
  progress(30);
  const d=document.createElement('div');
  d.className='msg user';
  d.innerHTML=`
    <div class="av usr-av">ğŸ‘¤</div>
    <div class="bubble">${escHtml(text)}<div class="ts">${getTime()}</div></div>`;
  document.getElementById('chatBox').appendChild(d);
  scrollDown();
}

/* ============================================================
   BOT BUBBLE
============================================================ */
function botMsg(html, chips=[]){
  msgCount++; totalBytes+=html.length; updateStats();
  chatLog.push({role:'bot',text:stripTags(html),time:getTime()});
  const chat=document.getElementById('chatBox');
  // Typing
  const tDiv=document.createElement('div');
  tDiv.className='msg bot'; tDiv.id='typing';
  tDiv.innerHTML=`
    <div class="av bot-av">ğŸŒ¾</div>
    <div class="bubble">
      <div class="typing-dots"><span></span><span></span><span></span></div>
    </div>`;
  chat.appendChild(tDiv); scrollDown();
  progress(70);

  setTimeout(()=>{
    tDiv.remove(); progress(100);
    const rDiv=document.createElement('div');
    rDiv.className='msg bot';
    let chipHtml='';
    if(chips.length){
      chipHtml='<div class="chips">'+
        chips.map(c=>`<div class="chip" onclick="sendMessage('${c}')">${c}</div>`).join('')+
      '</div>';
    }
    const plainText=stripTags(html);
    rDiv.innerHTML=`
      <div class="av bot-av">ğŸŒ¾</div>
      <div class="bubble">
        ${html}
        ${chipHtml}
        <div style="display:flex;align-items:center;justify-content:space-between;margin-top:6px">
          <button class="read-aloud" onclick="speak('${encodeURIComponent(plainText)}',true)">ğŸ”Š Read Aloud</button>
          <div class="ts">${getTime()}</div>
        </div>
      </div>`;
    chat.appendChild(rDiv); scrollDown();
    setTimeout(()=>progress(0),600);
    if(autoTTS) speak(plainText);
    if(soundOn) playSound();
  }, saverMode?400:1000);
}

/* ============================================================
   PROGRESS BAR
============================================================ */
function progress(val){
  document.getElementById('progress').style.width=val+'%';
}

/* ============================================================
   PROCESS QUERY (AI Logic)
============================================================ */
function processQuery(q){
  const ql=q.toLowerCase();

  // Greetings
  if(/^(hi|hello|namaste|hey|namaskar|good morning|good evening|jai|pranam|vanakkam|salam)/i.test(ql)){
    botMsg("ğŸ™ <b>Namaste!</b> How can I help you today?<br>Choose a topic tab or type your question.",
      ['Rice farming','How to treat fever','PM KISAN','Save money tips']);
    return;
  }

  // Thanks
  if(/thank|dhanyawad|shukriya|thanks/i.test(ql)){
    botMsg("ğŸ˜Š You're welcome! I'm always here to help.<br>Feel free to ask anything else! ğŸŒ¾");
    return;
  }

  // Help
  if(/help|what can you|capabilities|features|kya kar sakte/i.test(ql)){
    botMsg("ğŸ¤– <b>I can help you with:</b><br><br>"+
      "ğŸŒ± <b>Agriculture</b> â€” Rice, Wheat, Maize, Cotton, Vegetables, Organic Farming<br>"+
      "â¤ï¸ <b>Health</b> â€” Fever, Diarrhea, Pregnancy, Snake Bite, First Aid, Diabetes<br>"+
      "ğŸŒ¦ï¸ <b>Weather</b> â€” Monsoon, Drought, Heat Wave, Storm Safety<br>"+
      "ğŸ›ï¸ <b>Government</b> â€” PM-KISAN, Ayushman, Ration, KCC, MGNREGA, PMAY<br>"+
      "ğŸ“š <b>Education</b> â€” Scholarships, Literacy, Skill Training<br>"+
      "ğŸ„ <b>Livestock</b> â€” Cattle, Goat, Poultry, Fish Farming<br>"+
      "ğŸ’° <b>Finance</b> â€” Savings, SHG, MUDRA Loan, Digital Payments<br>"+
      "ğŸ“Š <b>Market</b> â€” MSP Prices, FPO, Storage Tips",
      ['Rice farming tips','PM KISAN details','How to raise goats','MUDRA loan details']);
    return;
  }

  // Emergency
  if(/emergency|help me|accident|fire|police|ambulance|108|100|101/i.test(ql)){
    botMsg("ğŸ†˜ <b>EMERGENCY CONTACTS:</b><br><br>"+
      "ğŸš‘ Ambulance: <b>108</b><br>"+
      "ğŸ‘® Police: <b>100</b><br>"+
      "ğŸš’ Fire: <b>101</b><br>"+
      "ğŸŒŠ NDRF Disaster: <b>1078</b><br>"+
      "ğŸ‘© Women Safety: <b>181</b><br>"+
      "ğŸŒ¾ Kisan Helpline: <b>1800-180-1551</b><br>"+
      "ğŸ¥ Health: <b>104</b><br><br>"+
      "<b>Tap the ğŸ†˜ button at the top for quick dial!</b>");
    return;
  }

  // Weather (live attempt)
  if(/current weather|aaj ka mausam|today weather|temperature today/i.test(ql)){
    fetchWeather();
    botMsg("ğŸŒ¤ï¸ I'm fetching the latest weather data for you...<br>"+
      "You can also tap the <b>ğŸŒ¤ï¸ button</b> in the header to see the weather widget!<br><br>"+
      "For daily farm-specific forecasts, use <b>Meghdoot App</b> or SMS your pincode to <b>7738299899</b>");
    return;
  }

  // Search KB
  const allEntries = topic==='all'
    ? Object.values(KB).flat()
    : (KB[topic]||Object.values(KB).flat());

  let best=null, score=0;
  for(const e of allEntries){
    let s=0;
    for(const k of e.kw){ if(ql.includes(k)) s+=k.split(' ').length; }
    if(s>score){ score=s; best=e; }
  }

  if(best&&score>0){
    botMsg(best.a, getChips(topic));
  } else {
    // Fuzzy partial match
    let partial=null, ps=0;
    for(const e of Object.values(KB).flat()){
      for(const k of e.kw){
        const words=k.split(' ');
        for(const w of words){
          if(w.length>3 && ql.includes(w)){
            if(1>ps){ ps=1; partial=e; }
          }
        }
      }
    }
    if(partial){
      botMsg(partial.a, getChips('all'));
    } else {
      botMsg(
        "ğŸ¤” <b>I couldn't find that in my local knowledge base.</b><br><br>"+
        "Try asking about:<br>"+
        "â€¢ <i>Rice/Wheat/Maize farming</i><br>"+
        "â€¢ <i>Fever, diarrhea, pregnancy treatment</i><br>"+
        "â€¢ <i>PM-KISAN, Ayushman Bharat, MGNREGA</i><br>"+
        "â€¢ <i>Goat/Poultry/Fish farming</i><br>"+
        "â€¢ <i>MUDRA loan, SHG, savings tips</i><br>"+
        "â€¢ <i>Monsoon/drought advisory</i><br><br>"+
        "ğŸ“¡ <i>When online, I can search the internet for your query.</i>",
        ['Rice farming','Fever treatment','PM KISAN','Goat farming']
      );
    }
  }
}

/* ============================================================
   CHIPS HELPER
============================================================ */
function getChips(t){
  const c={
    agriculture:['Soil health tips','Drip irrigation','Pest control','Organic farming'],
    health:['Snake bite first aid','Pregnancy care','Fever treatment','Child nutrition'],
    weather:['Flood preparation','Drought advisory','Weather apps'],
    government:['Ayushman Bharat','KCC loan','MGNREGA work','PM Awas Yojana'],
    education:['Student scholarships','Adult literacy','Skill training'],
    livestock:['Buffalo farming','Goat rearing','Poultry guide','Fish farming'],
    finance:['SHG benefits','MUDRA loan','UPI payments','Post office savings'],
    market:['MSP prices','FPO benefits','Crop storage tips'],
    all:['Rice farming','Cow care','PM KISAN','MUDRA loan']
  };
  return c[t]||c.all;
}

/* ============================================================
   WEATHER WIDGET
============================================================ */
function toggleWeather(){
  const w=document.getElementById('weatherWidget');
  w.classList.toggle('show');
  if(w.classList.contains('show')) loadWeather();
}

function loadWeather(){
  if(!navigator.geolocation){
    setWeatherDisplay(null); return;
  }
  navigator.geolocation.getCurrentPosition(pos=>{
    fetchWeatherCoords(pos.coords.latitude, pos.coords.longitude);
  }, ()=>setWeatherDisplay(null));
}

function fetchWeather(){
  loadWeather();
  document.getElementById('weatherWidget').classList.add('show');
}

async function fetchWeatherCoords(lat,lon){
  try{
    const res=await fetch(
      `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}`+
      `&current=temperature_2m,relative_humidity_2m,wind_speed_10m,apparent_temperature,weather_code`+
      `&timezone=auto`
    );
    const d=await res.json();
    const c=d.current;
    setWeatherDisplay({
      temp: Math.round(c.temperature_2m),
      feels: Math.round(c.apparent_temperature),
      hum: c.relative_humidity_2m,
      wind: Math.round(c.wind_speed_10m),
      code: c.weather_code,
      lat,lon
    });
    // Update stat bar
    document.getElementById('weatherStat').style.display='flex';
    document.getElementById('tempStat').textContent=Math.round(c.temperature_2m)+'Â°C';
  }catch(e){
    setWeatherDisplay(null);
  }
}

function setWeatherDisplay(d){
  if(!d){
    document.getElementById('ww-temp').textContent='--Â°C';
    document.getElementById('ww-desc').textContent='Unable to load weather';
    document.getElementById('ww-loc').textContent='ğŸ“ Location unavailable';
    return;
  }
  document.getElementById('ww-temp').textContent=d.temp+'Â°C';
  document.getElementById('ww-feels').textContent=d.feels+'Â°C';
  document.getElementById('ww-hum').textContent=d.hum+'%';
  document.getElementById('ww-wind').textContent=d.wind+' km/h';
  document.getElementById('ww-icon').textContent=wmoToEmoji(d.code);
  document.getElementById('ww-desc').textContent=wmoToDesc(d.code);
  document.getElementById('ww-date').textContent=new Date().toLocaleDateString('en-IN');
  document.getElementById('ww-loc').textContent='ğŸ“ Lat:'+d.lat.toFixed(2)+' Lon:'+d.lon.toFixed(2);
}

function wmoToEmoji(c){
  if(c===0)return'â˜€ï¸';
  if(c<=2)return'â›…';
  if(c===3)return'â˜ï¸';
  if(c<=49)return'ğŸŒ«ï¸';
  if(c<=69)return'ğŸŒ§ï¸';
  if(c<=79)return'ğŸŒ¨ï¸';
  if(c<=84)return'ğŸŒ¦ï¸';
  if(c<=94)return'â›ˆï¸';
  return'ğŸŒ©ï¸';
}

function wmoToDesc(c){
  if(c===0)return'Clear sky';
  if(c<=2)return'Partly cloudy';
  if(c===3)return'Overcast';
  if(c<=49)return'Foggy / Mist';
  if(c<=69)return'Rain showers';
  if(c<=79)return'Snow';
  if(c<=84)return'Rain showers';
  return'Thunderstorm';
}

/* ============================================================
   EMERGENCY
============================================================ */
function toggleEmergency(){
  document.getElementById('emergencyPanel').classList.toggle('show');
}

function callNum(n){
  window.location.href='tel:'+n;
}

/* ============================================================
   SPEECH SYNTHESIS (TTS)
============================================================ */
function speak(textOrEncoded, isEncoded=false){
  if(!synth)return;
  const text=isEncoded?decodeURIComponent(textOrEncoded):textOrEncoded;
  synth.cancel();
  const utt=new SpeechSynthesisUtterance(text.substring(0,300));
  utt.lang=lang; utt.rate=0.
